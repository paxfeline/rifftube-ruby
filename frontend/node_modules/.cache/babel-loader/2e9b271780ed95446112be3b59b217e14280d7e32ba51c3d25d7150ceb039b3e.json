{"ast":null,"code":"var _jsxFileName = \"/Users/davidnewberry/Documents/test_rails/frontend/src/components/RiffControls/RiffDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport { editRiff, deleteRiff, updateRiffTime } from '../../actions/index.js';\nimport Delete from '../../images/delete-24px.svg';\nimport Edit from '../../images/edit-24px.svg';\nimport Audio from '../../images/settings_voice-24px.svg';\nimport Text from '../../images/chat-24px.svg';\nimport { executeScriptElements } from './util.js';\n\n/* this component is where a user can edit their riff */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RiffDetail(props) {\n  _s();\n  const [visible, setVisible] = useState(false);\n\n  //useEffect(() => { setTimeout(() => {setVisible(true);}, 20000); }, []);\n  useEffect(() => {\n    setVisible(true);\n  }, []);\n  const divRef = /*#__PURE__*/createRef();\n  useEffect(() => {\n    if (props.scroll) divRef.current.parentNode.scrollTop = divRef.current.offsetTop;\n  }, [divRef, props.scroll]);\n  const timeRef = /*#__PURE__*/createRef();\n\n  //console.log(props);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: divRef,\n    className: `riff-detail${props.selected ? ' riff-detail-selected' : ''}${visible ? '' : ' invisible'}`,\n    style: props.style,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        window.rifftubePlayer.seekTo(Math.max(props.start - 3, 0), true);\n      },\n      children: \"\\u21E5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), props.type === 'audio' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"audio-icon riff-type-icon\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"audio\",\n        src: Audio\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-icon riff-type-icon\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"text\",\n        src: Text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      className: \"edit-start\",\n      step: \"0.5\",\n      defaultValue: props.start.toFixed(2),\n      ref: timeRef,\n      onChange: () => {\n        props.updateRiffTime(timeRef.current.value, props.video_id, props.id, props.websocket);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"edit-riff-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"riff-button\",\n        onClick: () => {\n          fetch(`/riffs/${props.id}/edit`).then(response => response.text()).then(text => {\n            let el = document.createElement(\"div\");\n            el.innerHTML = text;\n            executeScriptElements(el);\n            document.body.append(el.firstChild);\n          });\n        }\n        /*\n        props.editRiff(\n          props.index,\n          props.type === 'audio' ? props.id : null, // weird but ok; yields id or null/false\n          !props.riffsAudio[props.id]\n        )\n        */,\n        children: \"\\u270E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"riff-button\",\n        onClick: () => {\n          if (window.confirm('Delete?')) props.deleteRiff(props.id, props.video_id, props.websocket);\n        },\n        children: \"\\uD83D\\uDDD1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n}\n_s(RiffDetail, \"tdih875XgMxQefzip/l/Dhpbgoo=\");\n_c = RiffDetail;\nconst mapStateToProps = state => ({\n  riffsAudio: state.riffsAudio,\n  websocket: state.websocket\n});\nconst mapDispatchToProps = {\n  editRiff,\n  deleteRiff,\n  updateRiffTime\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(RiffDetail);\nvar _c;\n$RefreshReg$(_c, \"RiffDetail\");","map":{"version":3,"names":["React","useState","useEffect","createRef","connect","editRiff","deleteRiff","updateRiffTime","Delete","Edit","Audio","Text","executeScriptElements","RiffDetail","props","visible","setVisible","divRef","scroll","current","parentNode","scrollTop","offsetTop","timeRef","selected","style","window","rifftubePlayer","seekTo","Math","max","start","type","toFixed","value","video_id","id","websocket","fetch","then","response","text","el","document","createElement","innerHTML","body","append","firstChild","confirm","mapStateToProps","state","riffsAudio","mapDispatchToProps"],"sources":["/Users/davidnewberry/Documents/test_rails/frontend/src/components/RiffControls/RiffDetail.js"],"sourcesContent":["import React, { useState, useEffect, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport { editRiff, deleteRiff, updateRiffTime } from '../../actions/index.js';\nimport Delete from '../../images/delete-24px.svg';\nimport Edit from '../../images/edit-24px.svg';\nimport Audio from '../../images/settings_voice-24px.svg';\nimport Text from '../../images/chat-24px.svg';\n\nimport { executeScriptElements } from './util.js';\n\n/* this component is where a user can edit their riff */\nfunction RiffDetail(props) {\n  const [visible, setVisible] = useState(false);\n\n  //useEffect(() => { setTimeout(() => {setVisible(true);}, 20000); }, []);\n  useEffect(() => {\n    setVisible(true);\n  }, []);\n\n  const divRef = createRef();\n\n  useEffect(() => {\n    if (props.scroll)\n      divRef.current.parentNode.scrollTop = divRef.current.offsetTop;\n  }, [divRef, props.scroll]);\n\n  const timeRef = createRef();\n\n  //console.log(props);\n\n  return (\n    <div\n      ref={divRef}\n      className={`riff-detail${props.selected ? ' riff-detail-selected' : ''}${\n        visible ? '' : ' invisible'\n      }`}\n      style={props.style}\n    >\n      <button\n        onClick={() => {\n          window.rifftubePlayer.seekTo(Math.max(props.start - 3, 0), true);\n        }}\n      >\n        â‡¥\n      </button>\n      {props.type === 'audio' ? (\n        <div className=\"audio-icon riff-type-icon\">\n          <img alt=\"audio\" src={Audio} />\n        </div>\n      ) : (\n        <div className=\"text-icon riff-type-icon\">\n          <img alt=\"text\" src={Text} />\n        </div>\n      )}\n      {/* \n      <li>\n        start start: {props.start ? props.start.toFixed(2) : null}\n      </li>\n      <li>duration: {props.duration.toFixed(2)}secs</li>\n      <li>type: {props.type}</li>\n      */}\n      <input\n        type=\"number\"\n        className=\"edit-start\"\n        step=\"0.5\"\n        defaultValue={props.start.toFixed(2)}\n        ref={timeRef}\n        onChange={() => {\n          props.updateRiffTime(\n            timeRef.current.value,\n            props.video_id,\n            props.id,\n            props.websocket\n          );\n        }}\n      ></input>\n      <div className=\"edit-riff-buttons\">\n        <button\n          className=\"riff-button\"\n          onClick={() =>\n            {\n              fetch(`/riffs/${props.id}/edit`)\n                .then(response => response.text())\n                .then(text =>\n                  {\n                    let el = document.createElement(\"div\");\n                    el.innerHTML = text;\n                    executeScriptElements(el);\n                    document.body.append(el.firstChild);\n                  });\n            }\n            /*\n            props.editRiff(\n              props.index,\n              props.type === 'audio' ? props.id : null, // weird but ok; yields id or null/false\n              !props.riffsAudio[props.id]\n            )\n            */\n          }\n        >\n          âœŽ\n        </button>\n        <button\n          className=\"riff-button\"\n          onClick={() => {\n            if (window.confirm('Delete?'))\n              props.deleteRiff(\n                props.id,\n                props.video_id,\n                props.websocket\n              );\n          }}\n        >\n          ðŸ—‘\n        </button>\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  riffsAudio: state.riffsAudio,\n  websocket: state.websocket,\n});\n\nconst mapDispatchToProps = {\n  editRiff,\n  deleteRiff,\n  updateRiffTime,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RiffDetail);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}