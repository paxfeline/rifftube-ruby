{"ast":null,"code":"import { DELETE_RIFF, SAVE_NEW_RIFF, SAVE_EDIT_RIFF, CANCEL_EDIT, RECEIVE_RIFF_LIST, SAVE_NEW_RIFF_SUCCESS, UPDATE_RIFF_TIME_SUCCESS } from '../actions/index.js';\nlet initialState = [];\nconst riffsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case DELETE_RIFF:\n      {\n        let ret = {\n          ...state\n        };\n        delete ret[action.id];\n        return ret;\n      }\n    case RECEIVE_RIFF_LIST:\n      return;\n      //debugger;\n      return action.payload.map(el => ({\n        ...el,\n        payload: el.isText ? el.text : null,\n        type: el.isText ? 'text' : 'audio'\n      }));\n    case UPDATE_RIFF_TIME_SUCCESS:\n      let riffs = [...state];\n      riffs.forEach((el, ind, arr) => {\n        if (el.id === action.id) arr[ind] = {\n          ...el,\n          id: action.id,\n          start: Number(action.start)\n        };\n        //el.id = action.payload.id;\n      });\n\n      return riffs;\n    case SAVE_NEW_RIFF:\n      // code block for variable grouping\n      {\n        const riff = {\n          ...action.payload,\n          saved: false,\n          tempId: new Date().getUTCMilliseconds()\n        };\n        delete riff.payload;\n\n        // create new riffs.all list, including new riff\n        let riffs = [...state, riff];\n        return riffs;\n      }\n    case SAVE_EDIT_RIFF:\n      {\n        const riff = {\n          ...action.payload,\n          saved: false\n        };\n        delete riff.payload;\n        let riffs = [...state];\n        riffs[riff.id] = riff;\n        return riffs;\n      }\n    case SAVE_NEW_RIFF_SUCCESS:\n      {\n        let riffs = [...state];\n        riffs.forEach((el, ind, arr) => {\n          if (el.tempId === action.payload.tempId) arr[ind] = {\n            ...el,\n            id: action.payload.id\n          };\n          //el.id = action.payload.id;\n        });\n\n        return riffs;\n      }\n    case SAVE_EDIT_RIFF_SUCCESS:\n      {}\n    default:\n      return state;\n  }\n};\nexport default riffsReducer;","map":{"version":3,"names":["DELETE_RIFF","SAVE_NEW_RIFF","SAVE_EDIT_RIFF","CANCEL_EDIT","RECEIVE_RIFF_LIST","SAVE_NEW_RIFF_SUCCESS","UPDATE_RIFF_TIME_SUCCESS","initialState","riffsReducer","state","action","type","ret","id","payload","map","el","isText","text","riffs","forEach","ind","arr","start","Number","riff","saved","tempId","Date","getUTCMilliseconds","SAVE_EDIT_RIFF_SUCCESS"],"sources":["/Users/davidnewberry/Documents/test_rails/frontend/src/reducers/riffs-reducer.js"],"sourcesContent":["import {\n  DELETE_RIFF,\n  SAVE_NEW_RIFF,\n  SAVE_EDIT_RIFF,\n  CANCEL_EDIT,\n  RECEIVE_RIFF_LIST,\n  SAVE_NEW_RIFF_SUCCESS,\n  UPDATE_RIFF_TIME_SUCCESS,\n} from '../actions/index.js';\n\nlet initialState = [];\n\nconst riffsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case DELETE_RIFF: {\n      let ret = { ...state };\n      delete ret[action.id]\n      return ret;\n    }\n    case RECEIVE_RIFF_LIST:\n      return \n      //debugger;\n      return action.payload.map((el) => ({\n          ...el,\n          payload: el.isText ? el.text : null,\n          type: el.isText ? 'text' : 'audio',\n        }));\n\n    case UPDATE_RIFF_TIME_SUCCESS:\n      let riffs = [...state];\n      riffs.forEach((el, ind, arr) => {\n        if (el.id === action.id)\n          arr[ind] = { ...el, id: action.id, start: Number(action.start) };\n        //el.id = action.payload.id;\n      });\n      return riffs;\n\n    case SAVE_NEW_RIFF: // code block for variable grouping\n    {\n      const riff =\n      {\n        ...action.payload,\n        saved: false,\n        tempId: new Date().getUTCMilliseconds()\n      };\n      delete riff.payload;\n\n      // create new riffs.all list, including new riff\n      let riffs = [...state, riff];\n\n      return riffs;\n    }\n\n    case SAVE_EDIT_RIFF:\n    {\n      const riff = { ...action.payload, saved: false };\n      delete riff.payload;\n\n      let riffs = [...state];\n      riffs[riff.id] = riff;\n\n      return riffs;\n    }\n\n    case SAVE_NEW_RIFF_SUCCESS:\n    {\n      let riffs = [...state];\n      riffs.forEach((el, ind, arr) => {\n        if (el.tempId === action.payload.tempId)\n          arr[ind] = { ...el, id: action.payload.id };\n        //el.id = action.payload.id;\n      });\n      return riffs;\n    }\n    case SAVE_EDIT_RIFF_SUCCESS:\n    {\n      \n    }\n\n    default:\n      return state;\n  }\n};\n\nexport default riffsReducer;\n"],"mappings":"AAAA,SACEA,WAAW,EACXC,aAAa,EACbC,cAAc,EACdC,WAAW,EACXC,iBAAiB,EACjBC,qBAAqB,EACrBC,wBAAwB,QACnB,qBAAqB;AAE5B,IAAIC,YAAY,GAAG,EAAE;AAErB,MAAMC,YAAY,GAAG,YAAkC;EAAA,IAAjCC,KAAK,uEAAGF,YAAY;EAAA,IAAEG,MAAM;EAChD,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKX,WAAW;MAAE;QAChB,IAAIY,GAAG,GAAG;UAAE,GAAGH;QAAM,CAAC;QACtB,OAAOG,GAAG,CAACF,MAAM,CAACG,EAAE,CAAC;QACrB,OAAOD,GAAG;MACZ;IACA,KAAKR,iBAAiB;MACpB;MACA;MACA,OAAOM,MAAM,CAACI,OAAO,CAACC,GAAG,CAAEC,EAAE,KAAM;QAC/B,GAAGA,EAAE;QACLF,OAAO,EAAEE,EAAE,CAACC,MAAM,GAAGD,EAAE,CAACE,IAAI,GAAG,IAAI;QACnCP,IAAI,EAAEK,EAAE,CAACC,MAAM,GAAG,MAAM,GAAG;MAC7B,CAAC,CAAC,CAAC;IAEP,KAAKX,wBAAwB;MAC3B,IAAIa,KAAK,GAAG,CAAC,GAAGV,KAAK,CAAC;MACtBU,KAAK,CAACC,OAAO,CAAC,CAACJ,EAAE,EAAEK,GAAG,EAAEC,GAAG,KAAK;QAC9B,IAAIN,EAAE,CAACH,EAAE,KAAKH,MAAM,CAACG,EAAE,EACrBS,GAAG,CAACD,GAAG,CAAC,GAAG;UAAE,GAAGL,EAAE;UAAEH,EAAE,EAAEH,MAAM,CAACG,EAAE;UAAEU,KAAK,EAAEC,MAAM,CAACd,MAAM,CAACa,KAAK;QAAE,CAAC;QAClE;MACF,CAAC,CAAC;;MACF,OAAOJ,KAAK;IAEd,KAAKlB,aAAa;MAAE;MACpB;QACE,MAAMwB,IAAI,GACV;UACE,GAAGf,MAAM,CAACI,OAAO;UACjBY,KAAK,EAAE,KAAK;UACZC,MAAM,EAAE,IAAIC,IAAI,EAAE,CAACC,kBAAkB;QACvC,CAAC;QACD,OAAOJ,IAAI,CAACX,OAAO;;QAEnB;QACA,IAAIK,KAAK,GAAG,CAAC,GAAGV,KAAK,EAAEgB,IAAI,CAAC;QAE5B,OAAON,KAAK;MACd;IAEA,KAAKjB,cAAc;MACnB;QACE,MAAMuB,IAAI,GAAG;UAAE,GAAGf,MAAM,CAACI,OAAO;UAAEY,KAAK,EAAE;QAAM,CAAC;QAChD,OAAOD,IAAI,CAACX,OAAO;QAEnB,IAAIK,KAAK,GAAG,CAAC,GAAGV,KAAK,CAAC;QACtBU,KAAK,CAACM,IAAI,CAACZ,EAAE,CAAC,GAAGY,IAAI;QAErB,OAAON,KAAK;MACd;IAEA,KAAKd,qBAAqB;MAC1B;QACE,IAAIc,KAAK,GAAG,CAAC,GAAGV,KAAK,CAAC;QACtBU,KAAK,CAACC,OAAO,CAAC,CAACJ,EAAE,EAAEK,GAAG,EAAEC,GAAG,KAAK;UAC9B,IAAIN,EAAE,CAACW,MAAM,KAAKjB,MAAM,CAACI,OAAO,CAACa,MAAM,EACrCL,GAAG,CAACD,GAAG,CAAC,GAAG;YAAE,GAAGL,EAAE;YAAEH,EAAE,EAAEH,MAAM,CAACI,OAAO,CAACD;UAAG,CAAC;UAC7C;QACF,CAAC,CAAC;;QACF,OAAOM,KAAK;MACd;IACA,KAAKW,sBAAsB;MAC3B,CAEA;IAEA;MACE,OAAOrB,KAAK;EAAC;AAEnB,CAAC;AAED,eAAeD,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}