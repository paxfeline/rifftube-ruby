{"ast":null,"code":"var _jsxFileName = \"/Users/davidnewberry/Documents/test_rails/frontend/src/components/RiffControls/RiffDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport { editRiff, deleteRiff, updateRiffTime } from '../../actions/index.js';\nimport Delete from '../../images/delete-24px.svg';\nimport Edit from '../../images/edit-24px.svg';\nimport Audio from '../../images/settings_voice-24px.svg';\nimport Text from '../../images/chat-24px.svg';\n\n/* this component is where a user can edit their riff */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RiffDetail(props) {\n  _s();\n  const [visible, setVisible] = useState(false);\n\n  //useEffect(() => { setTimeout(() => {setVisible(true);}, 20000); }, []);\n  useEffect(() => {\n    setVisible(true);\n  }, []);\n  const divRef = /*#__PURE__*/createRef();\n  useEffect(() => {\n    if (props.scroll) divRef.current.parentNode.scrollTop = divRef.current.offsetTop;\n  }, [divRef, props.scroll]);\n  const timeRef = /*#__PURE__*/createRef();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: divRef,\n    className: `riff-detail${props.selected ? ' riff-detail-selected' : ''}${visible ? '' : ' invisible'}`,\n    style: props.style,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        window.rifftubePlayer.seekTo(Math.max(props.time - 3, 0), true);\n      },\n      children: \"jump to\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), props.type === 'audio' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"audio-icon riff-type-icon\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"audio\",\n        src: Audio\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-icon riff-type-icon\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"text\",\n        src: Text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      className: \"edit-time\",\n      step: \"0.5\",\n      defaultValue: props.time.toFixed(2),\n      ref: timeRef,\n      onChange: () => {\n        props.updateRiffTime(timeRef.current.value, props.video_id, props.id, props.websocket);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"edit-riff-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"riff-button\",\n        onClick: () => {\n          fetch(`/riffs/${props.id}/edit`).then(response => response.text()).then(text => {\n            let el = templateRef.current;\n            el.innerHTML = text;\n            executeScriptElements(el.content);\n            document.body.append(el);\n          });\n        }\n        /*\n        props.editRiff(\n          props.index,\n          props.type === 'audio' ? props.id : null, // weird but ok; yields id or null/false\n          !props.riffsAudio.all[props.id]\n        )\n        */,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"edit button\",\n          src: Edit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"riff-button\",\n        onClick: () => {\n          if (window.confirm('Delete?')) props.deleteRiff(props.id, props.video_id, props.websocket);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"delete button\",\n          src: Delete\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n_s(RiffDetail, \"tdih875XgMxQefzip/l/Dhpbgoo=\");\n_c = RiffDetail;\nconst mapStateToProps = state => ({\n  riffsAudio: state.riffsAudio,\n  websocket: state.websocket\n});\nconst mapDispatchToProps = {\n  editRiff,\n  deleteRiff,\n  updateRiffTime\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(RiffDetail);\nvar _c;\n$RefreshReg$(_c, \"RiffDetail\");","map":{"version":3,"names":["React","useState","useEffect","createRef","connect","editRiff","deleteRiff","updateRiffTime","Delete","Edit","Audio","Text","RiffDetail","props","visible","setVisible","divRef","scroll","current","parentNode","scrollTop","offsetTop","timeRef","selected","style","window","rifftubePlayer","seekTo","Math","max","time","type","toFixed","value","video_id","id","websocket","fetch","then","response","text","el","templateRef","innerHTML","executeScriptElements","content","document","body","append","confirm","mapStateToProps","state","riffsAudio","mapDispatchToProps"],"sources":["/Users/davidnewberry/Documents/test_rails/frontend/src/components/RiffControls/RiffDetail.js"],"sourcesContent":["import React, { useState, useEffect, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport { editRiff, deleteRiff, updateRiffTime } from '../../actions/index.js';\nimport Delete from '../../images/delete-24px.svg';\nimport Edit from '../../images/edit-24px.svg';\nimport Audio from '../../images/settings_voice-24px.svg';\nimport Text from '../../images/chat-24px.svg';\n\n/* this component is where a user can edit their riff */\nfunction RiffDetail(props) {\n  const [visible, setVisible] = useState(false);\n\n  //useEffect(() => { setTimeout(() => {setVisible(true);}, 20000); }, []);\n  useEffect(() => {\n    setVisible(true);\n  }, []);\n\n  const divRef = createRef();\n\n  useEffect(() => {\n    if (props.scroll)\n      divRef.current.parentNode.scrollTop = divRef.current.offsetTop;\n  }, [divRef, props.scroll]);\n\n  const timeRef = createRef();\n\n  return (\n    <div\n      ref={divRef}\n      className={`riff-detail${props.selected ? ' riff-detail-selected' : ''}${\n        visible ? '' : ' invisible'\n      }`}\n      style={props.style}\n    >\n      <button\n        onClick={() => {\n          window.rifftubePlayer.seekTo(Math.max(props.time - 3, 0), true);\n        }}\n      >\n        jump to\n      </button>\n      {props.type === 'audio' ? (\n        <div className=\"audio-icon riff-type-icon\">\n          <img alt=\"audio\" src={Audio} />\n        </div>\n      ) : (\n        <div className=\"text-icon riff-type-icon\">\n          <img alt=\"text\" src={Text} />\n        </div>\n      )}\n      {/* \n      <li>\n        start time: {props.time ? props.time.toFixed(2) : null}\n      </li>\n      <li>duration: {props.duration.toFixed(2)}secs</li>\n      <li>type: {props.type}</li>\n      */}\n      <input\n        type=\"number\"\n        className=\"edit-time\"\n        step=\"0.5\"\n        defaultValue={props.time.toFixed(2)}\n        ref={timeRef}\n        onChange={() => {\n          props.updateRiffTime(\n            timeRef.current.value,\n            props.video_id,\n            props.id,\n            props.websocket\n          );\n        }}\n      ></input>\n      <div className=\"edit-riff-buttons\">\n        <button\n          className=\"riff-button\"\n          onClick={() =>\n            {\n              fetch(`/riffs/${props.id}/edit`)\n                .then(response => response.text())\n                .then(text =>\n                  {\n                    let el = templateRef.current;\n                    el.innerHTML = text;\n                    executeScriptElements(el.content);\n                    document.body.append(el);\n                  });\n            }\n            /*\n            props.editRiff(\n              props.index,\n              props.type === 'audio' ? props.id : null, // weird but ok; yields id or null/false\n              !props.riffsAudio.all[props.id]\n            )\n            */\n          }\n        >\n          <img alt=\"edit button\" src={Edit} />\n        </button>\n        <button\n          className=\"riff-button\"\n          onClick={() => {\n            if (window.confirm('Delete?'))\n              props.deleteRiff(\n                props.id,\n                props.video_id,\n                props.websocket\n              );\n          }}\n        >\n          <img alt=\"delete button\" src={Delete} />\n        </button>\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  riffsAudio: state.riffsAudio,\n  websocket: state.websocket,\n});\n\nconst mapDispatchToProps = {\n  editRiff,\n  deleteRiff,\n  updateRiffTime,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RiffDetail);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}