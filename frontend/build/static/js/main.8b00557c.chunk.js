/*! For license information please see main.8b00557c.chunk.js.LICENSE.txt */
(this.webpackJsonprifftube=this.webpackJsonprifftube||[]).push([[0],{130:function(e,t,a){e.exports=a.p+"static/media/Limelight-Regular.6ccb9eb8.ttf"},131:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(31),i=a.n(o),c=a(5),l=a(6),s=a(8),u=a(7),d=a(2),f=a(4),p=a(10),m=a.n(p),h="PLAY_MODE",v="PAUSE_MODE",y=function(e,t){return function(a){m()({method:"post",url:"/set-name",data:{token:t.getAuthResponse().id_token,newName:e}}).then((function(e){a({type:"RECEIVE_NAME_UPDATE",payload:e.data})})).catch((function(e){return console.log("error",e)}))}},g=function(e,t){return function(a){a({type:"SET_VIDEO_ID",payload:e}),m()({method:"get",url:"/get-view-riffs/".concat(e)}).then((function(e){a({type:"RECEIVE_RIFF_META",payload:e.data})})).catch((function(e){a({type:"RECEIVE_RIFF_META",payload:{body:[]}})})),t&&t.getAuthResponse&&m()({method:"post",url:"/get-riffs",data:{token:t.getAuthResponse().id_token,videoID:e}}).then((function(e){a({type:"RECEIVE_RIFF_LIST",payload:e.data})})).catch((function(e){console.error(e)}))}},E=function(e){return{type:"SET_PLAYER_MODE",payload:e}},b=function(e){return{type:"TOGGLE_PLAYER_MODE"}},w=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"audio"===e?"CREATE_TEMP_AUDIO_RIFF":"CREATE_TEMP_TEXT_RIFF",videoID:t,immediateRecord:a}},O=function(){return{type:"SET_IMMEDIATE_OFF"}},I=function(e){return{type:"SET_RECORDER",payload:e}},R=function(e,t){m()({method:"get",url:"/load-riff/".concat(t),responseType:"arraybuffer"}).then((function(a){e({type:"RIFF_LOADED",payload:a.data,id:t})})).catch((function(e){return console.log("error",e)}))},_=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){var e=new Audio;e.controls=!1,e.src="/dingdong.wav",e.play().then((function(){r.setupAudioPlayers()})).catch((function(){console.error("playback not allowed")}))},r.setupAudioPlayers=function(){r.setState({allowed:!0}),window.audioContexts=[],window.audioPlayers=[],window.audioPlayerUse=[],window.audioPlayersCount=5;for(var e=0;e<5;e++){window.audioContexts[e]=new(window.AudioContext||window.webkitAudioContext),window.audioPlayers[e]=new Audio,window.audioPlayers[e].controls=!1,window.audioPlayers[e].addEventListener("ended",(function(){this.inUse=!1}));var t=document.createElement("source");window.audioPlayers[e].appendChild(t),window.audioPlayers[e].srcEl=t}},r.render=function(){return r.state.allowed?null:n.a.createElement("div",{className:"audio-capture",onClick:function(){r.setupAudioPlayers(),r.props.setPlayerMode(h)}})},r.state={allowed:!1},r}return Object(l.a)(a)}(n.a.Component),D={setPlayerMode:E},j=Object(d.b)((function(e){return{}}),D)(_),T=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).componentDidMount=function(){if(window.YT&&window.YT.Player)e.loadVideo(),e.checkForRiffsToLoad(0);else{var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=e.loadVideo;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}},e.loadVideo=function(){if(window.YT){var t=e.props.id;window.rifftubePlayer&&window.rifftubePlayer.destroy(),e.player=new window.YT.Player("rifftube-player",{videoId:t,height:390,width:640,playerVars:{playsinline:1},events:{onReady:e.onPlayerReady,onStateChange:e.onPlayerStateChange}}),window.rifftubePlayer=e.player}},e.onPlayerReady=function(t){e.props.setVideoDuration(t.target.getDuration())},e.checkForRiffsToLoad=function(t){e.props.riffs.forEach((function(a){a.id&&"audio"===a.type&&!e.props.riffsAudio.all[a.id]&&!e.props.riffsAudio.loading[a.id]&&a.time>=t&&a.time<t+10&&e.props.loadRiff(a.id)}))},e.onPlayerStateChange=function(t){1===t.data?(e.curRiff=e.props.riffsPlaying,e.riffInterval=setInterval((function(){if(window.rifftubePlayer&&"function"==typeof window.rifftubePlayer.getCurrentTime){var t=window.rifftubePlayer.getCurrentTime();window.metaPlayHead&&window.metaPlayHead.current&&(window.metaPlayHead.current.style.left="".concat(t/e.props.duration*100,"%"),window.metaUpdate&&window.metaUpdate(window.metaPlayHead.current)),e.checkForRiffsToLoad(t),e.props.riffs.forEach((function(a,r){e.curRiff[r]&&(t<a.time||t>a.time+a.duration)&&(e.curRiff[r].inUse&&(e.curRiff[r].inUse=!1),e.props.setRiffPlaying(r,!1),e.curRiff[r]=null,"audio"===a.type&&e.audLock--,e.audLock||(window.rifftubePlayer.setVolume(e.vol?e.vol:100),delete e.vol))})),e.props.riffs.forEach((function(a,r){if(!e.curRiff[r]&&t>a.time&&t<a.time+.5&&(e.props.setRiffPlaying(r,!0),e.curRiff[r]=!0,"audio"===a.type)){if(e.vol||(e.vol=window.rifftubePlayer.getVolume(),window.rifftubePlayer.setVolume(.25*e.vol)),e.audLock?e.audLock++:e.audLock=1,!e.props.riffsAudio.all[a.id])return;var n=URL.createObjectURL(e.props.riffsAudio.all[a.id]);window.lastRiff=e.props.riffsAudio.all[a.id];for(var o=0;o<window.audioPlayersCount;o++){var i=window.audioPlayers[o];if(!i.inUse){i.inUse=!0,i.srcEl.src=n,i.load(),i.play(),e.curRiff[r]=i;break}}}}))}}),100),e.props.mode!==h&&e.props.setPlayerMode(h)):(clearInterval(e.riffInterval),e.props.mode===h&&e.props.setPlayerMode(v))},e.componentDidUpdate=function(t){e.checkForRiffsToLoad(0),e.props.id!==t.id&&e.loadVideo(),e.player&&e.player.getPlayerState&&e.props.mode!==t.mode&&("EDIT_MODE"!==e.props.mode&&"EDIT_NEW_MODE"!==e.props.mode&&e.props.mode!==v||1!==e.player.getPlayerState()?e.props.mode===h&&1!==e.player.getPlayerState()&&e.player.playVideo():e.player.pauseVideo())},e.render=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"rifftube-container"},n.a.createElement(j,null),n.a.createElement("div",{className:"rifftube-overlay"},n.a.createElement("div",{className:"rifftube-riffs-container"},Object.keys(e.props.riffsPlaying).filter((function(t){return e.props.riffsPlaying[t]&&e.props.riffs[t]&&"text"===e.props.riffs[t].type})).map((function(t){return n.a.createElement("div",{key:e.props.riffs[t].id,className:"rifftube-textriff"},e.props.riffs[t].payload)})))),n.a.createElement("div",{id:"rifftube-player"})))},e}return Object(l.a)(a)}(n.a.Component),N={setPlayerMode:E,setRiffPlaying:function(e,t){return{type:t?"SET_RIFF_PLAYING":"SET_RIFF_NOT_PLAYING",payload:e}},togglePlayerMode:b,loadRiff:function(e,t){return function(t){t({type:"LOAD_RIFF",payload:e}),R(t,e)}},setVideoDuration:function(e){return{type:"SET_VIDEO_DURATION",payload:e}}},A=Object(d.b)((function(e){return{mode:e.mode,riffsPlaying:e.riffsPlaying,googleUser:e.googleUser,duration:e.duration,riffsAudio:e.riffsAudio}}),N)(T),k=a(32),S={setGoogleUser:function(e){return function(t){t({type:"GOOGLE_USER_SIGNIN",payload:e})}}},F=Object(d.b)((function(e){return{videoID:e.videoID}}),S)((function(e){var t=e.setGoogleUser,a=e.videoID;return n.a.createElement(k.GoogleLogin,{clientId:"941154439836-s6iglcrdckcj6od74kssqsom58j96hd8.apps.googleusercontent.com",className:"google-login",isSignedIn:!0,onSuccess:function(e){t(e,a)},buttonText:"Login With Google"})})),P=a(33),L=a(57),C=a.n(L),x=a(58),U=a.n(x),V=a(59),M=a.n(V),G=a(60),Y=a.n(G);var W={editRiff:function(e,t,a){return function(r){r({type:"EDIT_RIFF",payload:e,id:t}),a&&R(r,t)}},deleteRiff:function(e,t,a,r){return function(n){m()({method:"delete",url:"/riff-remove/".concat(e),data:{token:t.getAuthResponse().id_token}}).then((function(t){n({type:"DELETE_RIFF",id:e}),r.send(JSON.stringify({type:"update",video_id:a}))})).catch((function(e){return console.log("error",e)}))}},updateRiffTime:function(e,t,a,r,n){return function(o){m()({method:"post",url:"/update-riff-time",data:{token:e,start:t,id:r}}).then((function(e){o({type:"UPDATE_RIFF_TIME_SUCCESS",id:r,time:t}),n.send(JSON.stringify({type:"update",video_id:a}))})).catch((function(e){o({type:"SAVE_RIFF_FAILURE",payload:e.response})}))}}},q=Object(d.b)((function(e){return{googleUser:e.googleUser,riffsAudio:e.riffsAudio,websocket:e.websocket}}),W)((function(e){var t=Object(r.useState)(!1),a=Object(P.a)(t,2),o=a[0],i=a[1];Object(r.useEffect)((function(){i(!0)}),[]);var c=Object(r.createRef)();Object(r.useEffect)((function(){e.scroll&&(c.current.parentNode.scrollTop=c.current.offsetTop)}),[c,e.scroll]);var l=Object(r.createRef)();return n.a.createElement("div",{ref:c,className:"riff-detail".concat(e.selected?" riff-detail-selected":"").concat(o?"":" invisible"),style:e.style},n.a.createElement("button",{onClick:function(){window.rifftubePlayer.seekTo(Math.max(e.time-3,0),!0)}},"jump to"),"audio"===e.type?n.a.createElement("div",{className:"audio-icon riff-type-icon"},n.a.createElement("img",{alt:"audio",src:M.a})):n.a.createElement("div",{className:"text-icon riff-type-icon"},n.a.createElement("img",{alt:"text",src:Y.a})),n.a.createElement("input",{type:"number",className:"edit-time",step:"0.5",defaultValue:e.time.toFixed(2),ref:l,onChange:function(){e.updateRiffTime(e.googleUser.getAuthResponse().id_token,l.current.value,e.video_id,e.id,e.websocket)}}),n.a.createElement("div",{className:"edit-riff-buttons"},n.a.createElement("button",{className:"riff-button",onClick:function(){return e.editRiff(e.index,"audio"===e.type?e.id:null,!e.riffsAudio.all[e.id])}},n.a.createElement("img",{alt:"edit button",src:U.a})),n.a.createElement("button",{className:"riff-button",onClick:function(){window.confirm("Delete?")&&e.deleteRiff(e.id,e.googleUser,e.video_id,e.websocket)}},n.a.createElement("img",{alt:"delete button",src:C.a}))))}));var H=Object(d.b)((function(e){return{riffs:e.riffs.all,riffsPlaying:e.riffsPlaying}}),null)((function(e){var t=0,a=e.riffs?e.riffs.sort((function(e,t){return e.time-t.time})):[],r=!0,o=[];for(var i in a){var c=a[i],l={};c.time>t?(l.top="".concat(c.time/10,"em"),t=c.time+Math.max(c.duration,45)):(l.top="".concat(t/10,"em"),t+=Math.max(c.duration,45)),l.height="".concat(Math.max(c.duration/10,4.5),"em"),o[i]=n.a.createElement(q,Object.assign({key:c.id,style:l},c,{index:i,selected:e.riffsPlaying[i],scroll:e.riffsPlaying[i]&&r})),e.riffsPlaying[i]&&(r=!1)}return n.a.createElement("div",{className:"list-of-riffs",style:{height:"".concat(t/10,"em")}},o)})),B=a(61),J=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).endRecord=function(){null!=r.props.recorder&&(r.setState({recordingState:!1}),r.duration=(Date.now()-r.startTime)/1e3,r.props.recorder.finishRecording())},r.startRecord=function(){null!=r.props.recorder&&(r.setState({recordingState:!0}),r.startTime=Date.now(),r.props.recorder.onComplete=function(e,t){r.props.saveTempAudio(t,r.duration)},r.props.recorder.setOptions({timeLimit:120,encodeAfterRecord:!0,mp3:{bitRate:160}}),setTimeout((function(){return r.props.recorder.startRecording()}),200))},r.state={recordingState:!1},r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("record CDM",this.props.userMedia),this.props.immediateRecord&&(console.log("start immediately"),this.startRecord(),window.addEventListener("keyup",(function(t){"r"==t.key&&e.endRecord()})))}},{key:"render",value:function(){var e;return e=navigator.mediaDevices?this.state.recordingState?n.a.createElement("button",{id:"stopBtn",onClick:this.endRecord},"stop"):n.a.createElement("button",{id:"recordBtn",onClick:this.startRecord},"Record"):n.a.createElement("span",null,"Your device is not supported by navigator.mediaDevices. Sorry."),n.a.createElement(n.a.Fragment,null,e)}}]),a}(n.a.Component),z={setImmediateOff:O},Q=Object(d.b)((function(e){return{immediateRecord:e.immediateRecord,recorder:e.recorder}}),z)(J);function K(){K=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(T){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new _(n||[]);return r(i,"_invoke",{value:w(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(T){return{type:"throw",arg:T}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(D([])));y&&y!==t&&a.call(y,o)&&(h=y);var g=m.prototype=f.prototype=Object.create(h);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function w(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return j()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=O(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function O(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function D(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=m,r(g,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},E(b.prototype),l(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new b(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=D,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),R(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;R(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:D(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var X=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).durationField=n.a.createRef(),r.htmlPayloadField=n.a.createRef(),r.startTimeField=n.a.createRef(),r}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return console.log("ed rif red"),n.a.createElement("div",{className:"edit-riff"},n.a.createElement("div",{className:"edit-riff-inner"},"audio"===this.props.tempRiff.type?n.a.createElement(n.a.Fragment,null,"EDIT_MODE"===this.props.mode&&this.props.editIndex&&!this.props.tempAudio?n.a.createElement("span",null,"Loading..."):null,n.a.createElement(Q,{saveTempAudio:this.props.saveTempAudio}),this.props.tempAudio?n.a.createElement("button",{onClick:Object(B.a)(K().mark((function t(){var a,r,n;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=document.createElement("audio"),r=document.createElement("source"),a.appendChild(r),a.controls=!1,n=URL.createObjectURL(e.props.tempAudio),r.src=n,a.load(),a.play();case 9:case"end":return t.stop()}}),t)})))},"Play"):null,n.a.createElement("br",null),n.a.createElement("div",null,"Start:"," ",n.a.createElement("input",{id:"riff-start-field",defaultValue:this.props.tempRiff.time,ref:this.startTimeField})),n.a.createElement("button",{disabled:!this.props.tempAudio,onClick:function(){e.props.saveRiff(e.props.googleUser.getAuthResponse().id_token,{payload:e.props.tempAudio,time:Number(e.startTimeField.current.value)},e.props.tempRiff)}},"Save")):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,"HTML payload:"),n.a.createElement("textarea",{id:"riff-edit-field",ref:this.htmlPayloadField,defaultValue:this.props.tempRiff.payload}),n.a.createElement("div",null,"Duration:"," ",n.a.createElement("input",{id:"riff-duration-field",defaultValue:this.props.tempRiff.duration||2,ref:this.durationField})),n.a.createElement("div",null,"Start:"," ",n.a.createElement("input",{id:"riff-start-field",defaultValue:this.props.tempRiff.time,ref:this.startTimeField})),n.a.createElement("button",{onClick:function(){e.props.saveRiff(e.props.googleUser.getAuthResponse().id_token,{payload:e.htmlPayloadField.current.value,duration:Number(e.durationField.current.value),time:Number(e.startTimeField.current.value)},e.props.tempRiff,e.props.websocket)}},"Save")),n.a.createElement("button",{onClick:function(){e.props.cancelEdit()}},"Cancel")))}}]),a}(n.a.Component),Z={setPlayerMode:E,saveRiff:function(e,t,a,r){return function(n){var o=new FormData;o.append("token",e),o.append("text"===a.type?"text":"blob",t.payload),o.append("type",a.type),o.append("duration","text"===a.type?t.duration:a.duration),o.append("start",t.time),o.append("video_id",a.video_id),o.append("tempId",a.tempId),o.append("id",a.id),m()({method:"post",url:"/save-riff",data:o,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){n({type:"SAVE_RIFF_SUCCESS",payload:e.data}),r.send(JSON.stringify({type:"update",video_id:a.video_id}))})).catch((function(e){n({type:"SAVE_RIFF_FAILURE",payload:e.response})})),n({type:"SAVE_RIFF",payload:t,riff:a})}},saveTempAudio:function(e,t){return{type:"SAVE_TEMP_AUDIO",payload:e,duration:t}},cancelEdit:function(){return{type:"CANCEL_EDIT"}}},$=Object(d.b)((function(e){return{mode:e.mode,tempRiff:e.riffs.temp,tempAudio:e.riffsAudio.temp,editIndex:e.riffs.editIndex,googleUser:e.googleUser,websocket:e.websocket}}),Z)(X),ee=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("button",{className:"riff-button",onClick:function(){e.props.createTempRiff(e.props.type,e.props.videoID)}},this.props.type)}}]),a}(n.a.Component),te={createTempRiff:w},ae=Object(d.b)((function(e){return{videoID:e.videoID}}),te)(ee);var re={setRifferName:y,googleUserLogout:function(){return{type:"GOOGLE_USER_SIGNIN",payload:null}},createTempRiff:w,togglePlayerMode:b,setRecorder:I},ne=Object(d.b)((function(e){return{mode:e.mode,name:e.name,googleUser:e.googleUser,videoID:e.videoID,duration:e.duration,recorder:e.recorder}}),re)((function(e){return Object(r.useEffect)((function(){var t=function(){setTimeout((function(){document.activeElement.blur()}),100)};window.addEventListener("blur",t);var a=function(t){if(console.log(e.mode),"r"===t.key)e.createTempRiff("audio",e.videoID,!0);else if("t"===t.key)e.createTempRiff("text",e.videoID);else{if("EDIT_MODE"===e.mode||"EDIT_NEW_MODE"===e.mode)return;"j"===t.key||"ArrowLeft"===t.key||"Left"===t.key?window.rifftubePlayer.seekTo(Math.max(window.rifftubePlayer.getCurrentTime()-5,0),!0):"l"===t.key||"ArrowRight"===t.key||"Right"===t.key?window.rifftubePlayer.seekTo(Math.min(window.rifftubePlayer.getCurrentTime()+5,e.duration),!0):" "!==t.key&&"k"!==t.key||(e.togglePlayerMode(),t.preventDefault())}};return window.addEventListener("keydown",a),function(){window.removeEventListener("blur",t),window.removeEventListener("keydown",a)}}),[e]),n.a.createElement("div",{className:"control-panel"},e.name?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"riffer-name"},"Riffer Name:\xa0",e.name),n.a.createElement(k.GoogleLogout,{clientId:"941154439836-s6iglcrdckcj6od74kssqsom58j96hd8.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){return e.googleUserLogout()}})):null,n.a.createElement("div",null,n.a.createElement("h2",{className:"add-riff-title"},"Add New Riff"),null!==e.recorder?n.a.createElement(ae,{type:"audio"}):n.a.createElement("button",{onClick:function(){var t=new(window.AudioContext||window.webkitAudioContext);navigator.mediaDevices&&navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(a){var r=t.createMediaStreamSource(a),n=new window.WebAudioRecorder(r,{workerDir:"/lib/",encoding:"mp3",onEncoderLoading:function(e,t){console.log("Loading "+t+" encoder...")},onEncoderLoaded:function(e,t){console.log(t+" encoder loaded")}});e.setRecorder(n)})).catch((function(e){console.log("oops, can't get stream",e)}))}},"Click to allow recording"),n.a.createElement(ae,{type:"text"}),"EDIT_MODE"===e.mode||"EDIT_NEW_MODE"===e.mode?n.a.createElement($,null):null),n.a.createElement("h2",{className:"riff-list-title"},"Control Panel"),n.a.createElement(H,null))})),oe=function(e){var t=e.riffsMeta,a=e.riffs,o=e.duration;return window.metaPlayHead=Object(r.createRef)(),n.a.createElement("div",{className:"container-riff-meta"},n.a.createElement("div",{id:"meta-play-head",ref:window.metaPlayHead}),t&&o&&a&&t.filter((function(e){return!a.find((function(t){return e.id===t.id}))})).map((function(e){return n.a.createElement("div",{key:e.id,className:"riff-meta",style:{left:e.time/o*100+"%",width:e.duration/o*100+"%"}})})),a&&a.map((function(e){return n.a.createElement("div",{key:e.id,className:"riff-own-meta",style:{left:e.time/o*100+"%",width:e.duration/o*100+"%"}})})))},ie=a(9),ce=function(e){var t=e.color;return n.a.createElement("nav",{className:"navbar"},n.a.createElement(ie.c,{exact:!0,activeClassName:"navbar-link-active",style:{color:t},to:"/"},"Home"),n.a.createElement(ie.c,{activeClassName:"navbar-link-active",style:{color:t},to:"/riff"},"Riff",n.a.createElement("em",null,"!")),n.a.createElement(ie.c,{activeClassName:"navbar-link-active",style:{color:t},to:"/TheList"},"The List"),n.a.createElement(ie.c,{activeClassName:"navbar-link-active",style:{color:t},to:"/about"},"About"),n.a.createElement(ie.c,{activeClassName:"navbar-link-active",style:{color:t},to:"/account"},"My Account"))},le=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){r.props.match.params.videoID&&(r.props.setVideoID(r.props.match.params.videoID,r.props.googleUser),r.videoIDRef.current.value=r.props.match.params.videoID)},r.componentDidUpdate=function(e,t){if(r.props.match.params.videoID!==r.props.videoID&&(r.props.setVideoID(r.props.match.params.videoID,r.props.googleUser),r.videoIDRef.current.value=r.props.match.params.videoID),r.loggedIn()&&r.props.videoID&&r.props.googleUser!==e.googleUser&&r.props.getRiffs(r.props.videoID,r.props.googleUser),r.loggedIn()&&(!r.props.websocket||r.props.videoID!==e.videoID)){var a=new WebSocket("".concat("wss://rifftube.herokuapp.com","/riff?videoID=").concat(r.props.match.params.videoID,"&googleToken=").concat(r.props.googleUser.getAuthResponse().id_token));a.onmessage=function(e){console.log(e.data);var t=JSON.parse(e.data);t.video_id===r.props.videoID&&"update"===t.type&&r.props.getRiffsMeta(r.props.videoID)},r.props.setWebSocket(a)}},r.loggedIn=function(){return!!r.props.googleUser&&r.props.googleUser.isSignedIn()},r.authCheck=function(e,t){return r.loggedIn()?n.a.createElement(e,null):n.a.createElement(t,null)},r.extractVideoID=function(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return t&&11===t[7].length?t[7]:e},r.videoIDRef=n.a.createRef(),r}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.props.match.params.videoID?n.a.createElement(n.a.Fragment,null,n.a.createElement(ce,{color:"grey"}),n.a.createElement("div",{className:"youtube-section"},n.a.createElement("div",{className:"top-section"},n.a.createElement("div",{className:"title-and-url"},n.a.createElement("h1",{className:"heading-primary-main"},"RiffTube"))),n.a.createElement("h4",{className:"get-started-instructions"},this.loggedIn()?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(F,null)," ",n.a.createElement("p",null,"to get started"))),n.a.createElement("label",null,"Paste any YouTube URL here \u2192 "),n.a.createElement("input",{type:"text",defaultValue:this.props.videoID,ref:this.videoIDRef}),n.a.createElement("button",{className:"btn",id:"change-video-btn",onClick:function(t){var a=e.extractVideoID(e.videoIDRef.current.value);e.props.history.push("/riff/".concat(a)),e.props.setVideoID(a,e.props.googleUser)}},"Change Video"),n.a.createElement(A,{id:this.props.videoID,riffs:this.props.riffs}),n.a.createElement(oe,null),n.a.createElement("div",{className:"view-share-riff-link"},n.a.createElement("a",{href:"/view/"+this.props.videoID+(this.props.user_id?"?solo="+this.props.user_id:""),target:"_blank",rel:"noopener noreferrer"},"View & Share Riffed Video"))),this.loggedIn()?n.a.createElement(ne,null):null):n.a.createElement(f.a,{to:"/riff/".concat(this.props.videoID)})}}]),a}(n.a.Component),se={setVideoID:g,setWebSocket:function(e){return{type:"WEB_SOCKET_UPDATE",payload:e}},getRiffsMeta:function(e){return function(t){m()({method:"get",url:"/get-view-riffs/".concat(e)}).then((function(e){t({type:"RECEIVE_RIFF_META",payload:e.data})})).catch((function(e){return console.log("error",e)}))}},getRiffs:function(e,t){return function(a){m()({method:"post",url:"/get-riffs",data:{token:t.getAuthResponse().id_token,videoID:e}}).then((function(e){a({type:"RECEIVE_RIFF_LIST",payload:e.data})})).catch((function(e){return console.log("error",e)})),m()({method:"get",url:"/get-view-riffs/".concat(e)}).then((function(e){a({type:"RECEIVE_RIFF_META",payload:e.data})})).catch((function(e){return console.log("error",e)}))}},setRecorder:I},ue=Object(d.b)((function(e){return{riffs:e.riffs.all,videoID:e.videoID,googleUser:e.googleUser,user_id:e.user_id,websocket:e.websocket,recorder:e.recorder}}),se)(le),de=a(16),fe=a(14),pe=a(1),me=a(18),he=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).selectRiff=function(e){var t;if(!r.state.nonOverlappingRiffs.has(t)){var a=new Set(r.state.selectedRiffs),n=new Set(r.props.riffs),o=new Set;r.state.overlappingRiffs.forEach((function(e){return o.add(new Set(e))})),t=e;do{var i,c=Object(me.a)(r.state.overlappingRiffs);try{for(c.s();!(i=c.n()).done;){var l=i.value;l.has(t)&&l.forEach((function(e){a.delete(e),n.delete(e)}))}}catch(A){c.e(A)}finally{c.f()}a.add(t);var s,u=Object(me.a)(a);try{for(u.s();!(s=u.n()).done;){var d,f=s.value,p=[],m=Object(me.a)(o);try{for(m.s();!(d=m.n()).done;){var h=d.value;h.has(f)&&p.push(h)}}catch(A){m.e(A)}finally{m.f()}for(var v=0,y=p;v<y.length;v++){var g=y[v];o.delete(g);var E,b=new Set,w=Object(me.a)(o);try{for(w.s();!(E=w.n()).done;){var O,I=E.value,R=Object(me.a)(g);try{for(R.s();!(O=R.n()).done;){var _=O.value;n.delete(_),I.delete(_)}}catch(A){R.e(A)}finally{R.f()}}}catch(A){w.e(A)}finally{w.f()}}}}catch(A){u.e(A)}finally{u.f()}var D,j=Object(me.a)(o);try{for(j.s();!(D=j.n()).done;){var T=D.value;T.size>0&&(b=new Set([].concat(Object(de.a)(b),Object(de.a)(T))))}}catch(A){j.e(A)}finally{j.f()}b.size>0&&(t=b.values().next().value)}while(b.size>0);var N=[].concat(Object(de.a)(n),Object(de.a)(a));r.setState({filteredRiffs:N,selectedRiffs:a})}},window.metaPlayHead=n.a.createRef(),r.selectDiv=n.a.createRef(),window.metaUpdate=function(e){r.selectDiv.current&&(r.selectDiv.current.scrollLeft=e.offsetLeft-r.selectDiv.current.offsetWidth/2)},r.state={filteredRiffs:[],overlappingRiffs:[],nonOverlappingRiffs:null,selectedRiffs:null,tracks:[]},r}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){if(e.riffs!==this.props.riffs){var t=[[]],a=[0],r=new Set,n=[],o=[],i=new Set,c=0;this.props.riffs.sort((function(e,t){return e.time-t.time}));var l,s=Object(me.a)(this.props.riffs);try{for(s.s();!(l=s.n()).done;){var u=l.value;if(n.length>0){var d,f=[],p=Object(me.a)(n);try{for(p.s();!(d=p.n()).done;){var m=d.value;if(m.time+m.duration<=u.time){if(c>0&&n.length>1){o.push(new Set(n));var h,v=Object(me.a)(n);try{for(v.s();!(h=v.n()).done;){var y=h.value;if(t[0].includes(y)){i.add(y);break}}}catch(j){v.e(j)}finally{v.f()}}else c>0&&r.add(m);f.push(m),c=-1}}}catch(j){p.e(j)}finally{p.f()}for(var g=0,E=f;g<E.length;g++){var b=E[g];n.splice(n.indexOf(b),1)}}n.push(u),n.sort((function(e,t){return e.time+e.duration-(t.time+t.duration)})),c=1;for(var w=!0,O=0;O<t.length;O++)if(a[O]<=u.time){t[O].push(u),a[O]=u.time+u.duration,w=!1;break}w&&(t.push([u]),a.push(u.time+u.duration))}}catch(j){s.e(j)}finally{s.f()}if(n.length>1){o.push(new Set(n));var I,R=Object(me.a)(n);try{for(R.s();!(I=R.n()).done;){var _=I.value;if(t[0].includes(_)){i.add(_);break}}}catch(j){R.e(j)}finally{R.f()}}else r.add(n[0]);var D=Object(de.a)(t[0]);this.setState({filteredRiffs:D,overlappingRiffs:o,nonOverlappingRiffs:r,selectedRiffs:i,tracks:t})}}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{id:this.props.id,riffs:this.state.filteredRiffs}),n.a.createElement("div",{ref:this.selectDiv,style:{fontSize:"2em",overflow:"hidden",width:"640px"}},n.a.createElement("div",{style:{height:"".concat(.75*this.state.tracks.length,"em"),width:"".concat(this.props.duration,"em"),position:"relative"}},n.a.createElement("div",{id:"meta-play-head",style:{backgroundColor:"red",height:"inherit"},ref:window.metaPlayHead}),this.state.tracks.map((function(t){return n.a.createElement("div",{style:{width:"".concat(e.props.duration,"em"),height:"0.75em"}},t.map((function(t){return n.a.createElement("div",{style:{position:"absolute",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"0.25em",lineHeight:"3em",verticalAlign:"middle",left:"".concat(4*t.time,"em"),height:"3em",width:"".concat(4*t.duration,"em"),backgroundColor:e.state.filteredRiffs.includes(t)?"red":"lightgrey"},onClick:function(){return e.selectRiff(t)}},t.name)})))})))))}}]),a}(n.a.Component),ve=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).setMute=function(e,t){r.setState((function(a,r){var n=Object(pe.a)(Object(pe.a)({},a.muted),{},Object(fe.a)({},e,t));return{muted:n,filteredRiffs:r.riffs.filter((function(e){return!n[e.user_id]})),all:!1}}))},r.toggleMute=function(e){var t=Object(pe.a)(Object(pe.a)({},r.state.muted),{},Object(fe.a)({},e,!r.state.muted[e])),a="?solo="+r.state.names.map((function(e){return e.id})).filter((function(e){return!t[e]})).join(",");r.props.history.push("/view/".concat(r.props.videoID).concat(a))},r.state={names:[],muted:{},filteredRiffs:[],all:!0},r}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=this.props.riffers?this.props.riffers.indexOf(",")>=0?this.props.riffers.split(","):[this.props.riffers]:[];if(e.riffers!==this.props.riffers){var n={};this.state.names.forEach((function(e){n[e.id]=!(r.includes(String(e.id))||void 0===a.props.riffers)})),this.setState({muted:n,all:void 0===this.props.riffers,filteredRiffs:this.props.riffs.filter((function(e){return!n[e.user_id]}))})}if(e.timestamp!==this.props.timestamp||0===e.riffs.length&&this.props.riffs.length>0){var o=Object(de.a)(this.state.names),i=Object(pe.a)({},this.state.muted);this.props.riffs.forEach((function(e){var t,n;t=o,n=e.user_id,t.some((function(e){return e.id===n}))||(o.push({name:e.name,id:e.user_id}),void 0!==a.props.riffers&&(i[e.user_id]=!r.some((function(t){return e.user_id===Number(t)}))))})),this.setState({names:o,muted:i,all:void 0===this.props.riffers,filteredRiffs:void 0===this.props.riffers?this.props.riffs:this.props.riffs.filter((function(e){return!i[e.user_id]}))})}}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(he,{id:this.props.videoID,duration:this.props.duration,riffs:this.state.filteredRiffs}),n.a.createElement("div",{onClick:function(){if(e.state.all){var t=e.state.names.map((function(e){return e.id})).filter((function(t){return!e.state.muted[t]})).join(",");e.props.history.push("/view/".concat(e.props.videoID,"?solo=").concat(t))}else e.props.history.push("/view/".concat(e.props.videoID))},style:{backgroundColor:this.state.all?"blue":"gray"}},"All"),this.state.names.map((function(t){return n.a.createElement("div",{key:t.id,onClick:function(){return e.toggleMute(t.id)},style:{backgroundColor:e.state.muted[t.id]?"gray":"blue"}},t.name)})))}}]),a}(n.a.Component),ye=Object(d.b)((function(e){return{timestamp:e.riffs.timestamp}}),null)(ve),ge=a(92),Ee=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).componentDidMount=function(){e.props.setVideoID(e.props.match.params.videoID),e.props.getViewRiffs(e.props.match.params.videoID)},e.render=function(){var t=ge.parse(e.props.location.search);return n.a.createElement(n.a.Fragment,null,n.a.createElement(ce,{color:"grey"}),n.a.createElement("div",{style:{marginTop:"4em"}},n.a.createElement("h1",null,"View ",e.props.match.params.videoID),n.a.createElement(ye,{duration:e.props.duration,history:e.props.history,videoID:e.props.match.params.videoID,riffers:t.solo,riffs:e.props.riffs})))},e}return Object(l.a)(a)}(n.a.Component),be={setVideoID:g,getViewRiffs:function(e){return function(t){m()({method:"get",url:"/get-view-riffs/".concat(e)}).then((function(e){t({type:"RECEIVE_RIFF_LIST",payload:e.data})})).catch((function(e){return console.log("error",e)}))}}},we=Object(d.b)((function(e){return{riffs:e.riffs.all,duration:e.duration}}),be)(Ee),Oe=a(28),Ie=a.n(Oe),Re=a(62),_e=a.n(Re),De=function(){return n.a.createElement("div",{className:"landing-page"},n.a.createElement(ce,{color:"grey"}),n.a.createElement("section",{className:"top-part"},n.a.createElement("div",{className:"heading"},n.a.createElement("span",{className:"heading-primary-main"},"RiffTube"),n.a.createElement("span",{className:"heading-primary-sub"},"Add Your Voice to YouTube Videos"),n.a.createElement(ie.b,{to:"/riff",className:"get-started-btn btn"},"Get Started \u2192")),n.a.createElement("img",{alt:"movie theater",className:"movie-image",src:_e.a})),n.a.createElement("section",{className:"middle-part"},n.a.createElement("div",{className:"middle-text"},n.a.createElement("h3",null,"Riffing for the Riff Raff")),n.a.createElement("div",{className:"about"},n.a.createElement("div",{className:"about-text"},n.a.createElement("p",null,"In the glorious tradition of Mystery Science Theater 3000, The Film Crew, RiffTrax, Cinematic Titanic, MST3k again, and others..."),n.a.createElement("p",null,"Now presenting: ",n.a.createElement("em",null,"you!")),n.a.createElement("p",null,"RiffTube allows you to add your own riffs to any video on YouTube."))),n.a.createElement("div",{className:"features"},n.a.createElement("div",{className:"feature feature-one"},n.a.createElement(Ie.a,{icon:"mic",color:"#a41320",size:"medium"}),n.a.createElement("p",null,"Record your voice")),n.a.createElement("div",{className:"feature feature-two"},n.a.createElement(Ie.a,{icon:"edit",color:"#a41320",size:"medium"}),n.a.createElement("p",null,"Edit your recordings")),n.a.createElement("div",{className:"feature feature-three"},n.a.createElement(Ie.a,{icon:"people",color:"#a41320",size:"medium"}),n.a.createElement("p",null,"Add your friends' voices")),n.a.createElement("div",{className:"feature feature-three"},n.a.createElement(Ie.a,{icon:"share",color:"#a41320",size:"medium"}),n.a.createElement("p",null,"Share with anybody")))),n.a.createElement("section",{className:"bottom-part"},n.a.createElement("footer",{className:"landing-footer"},"Copyright \xa9 2020 - All rights reserved")))},je=a(63),Te=a.n(je),Ne=function(){return n.a.createElement("div",{className:"landing-page"},n.a.createElement(ce,{color:"white"}),n.a.createElement("section",{className:"middle-part",style:{height:"initial"}},n.a.createElement("div",{className:"middle-text"},n.a.createElement("h1",{style:{color:"white",marginTop:"6rem"},className:"heading-primary-main"},"About RiffTube"),n.a.createElement("p",null,"or: How I Learned to Stop Worrying and Love RiffTube")),n.a.createElement("h2",null,"Developers:"),n.a.createElement("div",{className:"features"},n.a.createElement("div",{className:"feature feature-one",style:{width:"initial"}},n.a.createElement("img",{src:"/joss.jpg",alt:"Joss!",style:{borderRadius:"50%"}}),n.a.createElement("p",{className:"heading-name"},"Joscelyn!")),n.a.createElement("div",{className:"feature feature-two",style:{width:"initial"}},n.a.createElement("img",{src:"/david.jpg",alt:"David!",style:{borderRadius:"50%"}}),n.a.createElement("p",{className:"heading-name"},"David!"))),n.a.createElement("div",{className:"about",style:{backgroundColor:"white",width:"100%",color:"black"}},n.a.createElement("div",{className:"about-text"},n.a.createElement("h2",{className:"heading-qa"},"Q&A"),n.a.createElement("p",{className:"question"},"Q: Just what is RiffTube?"),n.a.createElement("p",{className:"answer"},"RiffTube is a tool that allows you to add your voice to YouTube videos. Riffs are saved remotely, so your riffs can be shared with the world!"),n.a.createElement("div",{style:{height:"1px",background:"gray",width:"75%",margin:"auto"}}),n.a.createElement("p",{className:"question"},"Q: How are you so smart that you came up with this and made it?"),n.a.createElement("p",{className:"answer"},"Years spent watching MST3k and learning to code."),n.a.createElement("div",{style:{height:"1px",background:"gray",width:"75%",margin:"auto"}}),n.a.createElement("p",{className:"question"},"Q: Where are the riffs stored?"),n.a.createElement("p",{className:"answer"},"The are stored on a server, not your computer."),n.a.createElement("div",{style:{height:"1px",background:"gray",width:"75%",margin:"auto"}}),n.a.createElement("p",{className:"question"},"Q: How can I contact you with questions or issues?"),n.a.createElement("p",{className:"answer"},"The best way to report technical issues is via the RiffTube"," ",n.a.createElement("a",{href:"https://github.com/JossWritesCode/RiffTube/issues"},"github repository")," ",n.a.createElement("a",{href:"https://github.com/JossWritesCode/RiffTube/issues"},"issue tracker."," "),"You can also email us:"," ",n.a.createElement("a",{href:"mailto:grokprogramming@gmail.com"},"grokprogramming@gmail.com"),"."),n.a.createElement("div",{style:{height:"1px",background:"gray",width:"75%",margin:"auto"}}),n.a.createElement("p",{className:"question"},"Q: It's not working!"),n.a.createElement("p",{className:"answer"},"If you have a Mac, check your Security & Privacy settings in System Preferences. You need to make sure that your browser has permission to access to microphone. If that doesn't help, please email us or report the issue via github. Please include what kind of computer you are using (Windows, Mac, Android, iOS, Linux, etc.), and what browser (Chrome, FireFox, Edge, etc)."),n.a.createElement("div",{style:{height:"1px",background:"gray",width:"75%",margin:"auto"}}),n.a.createElement("p",{className:"question"},"Q: Why is Google sign in required?"),n.a.createElement("p",{className:"answer"},"To identify specific users, and prevent abuse of the system. Your email address and other information will never be shared without your consent."),n.a.createElement("div",{style:{height:"1px",background:"gray",width:"75%",margin:"auto"}}),n.a.createElement("p",{className:"question"},"Q: Do all YouTube videos work?"),n.a.createElement("p",{className:"answer"},"Unfortunately, no. Only videos that allow embedding currently work with RiffTube."),n.a.createElement("div",{style:{height:"1px",background:"gray",width:"75%",margin:"auto"}}),n.a.createElement("p",{className:"question"},"Q: Any plans?"),n.a.createElement("p",{className:"answer"},"So many. All the plans. If you have a feature you'd like to see, please submit a request. It might already be in the works!"),n.a.createElement("div",{style:{height:"1px",background:"gray",width:"75%",margin:"auto"}}),n.a.createElement("p",{className:"question"},"Q: What's your privacy policy?"),n.a.createElement("p",{className:"answer"},"RiffTube does not display, sell, or transmit any personal information publically or to any 3rd party.")),n.a.createElement("div",null,n.a.createElement("img",{alt:"people watching a movie",className:"horror-movie-image",src:Te.a})))),n.a.createElement("section",{className:"bottom-part"},n.a.createElement("footer",{className:"landing-footer"},"Copyright \xa9 2022 - All rights reserved")))},Ae=function(e){var t=e.userData;return n.a.createElement("ul",{className:"my-videos-list"},t&&t.map((function(e){var t=e.url,a=e.title,r=e.count;return n.a.createElement("li",{className:"my-video"},n.a.createElement("h3",{className:"my-video-title"},a.length>40?a.slice(0,40)+"...":a,"\xa0 (",r," riff",1===r?"":"s",")",n.a.createElement("br",null),n.a.createElement(ie.b,{to:"/riff/".concat(t)},"Riff"),"\xa0/\xa0",n.a.createElement(ie.b,{to:"/view/".concat(t)},"View")),n.a.createElement(ie.b,{to:"/riff/".concat(t)},n.a.createElement("img",{alt:"video frame",src:"https://img.youtube.com/vi/".concat(t,"/0.jpg")})))})))},ke={setRifferName:y,setRiffPic:function(e,t){return function(a){var r=new FormData;r.append("token",t.getAuthResponse().id_token),r.append("image",e),m()({method:"post",url:"/save-pic",data:r,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a({type:"SAVE_PIC_SUCCESS",payload:e.data})})).catch((function(e){a({type:"SAVE_PIC_FAILURE",payload:e.response})}))}},getUserData:function(e){return function(t){m()({method:"get",url:"/get-user-data/".concat(e.getAuthResponse().id_token)}).then((function(e){t({type:"LOAD_USER_DATA",payload:e.data})})).catch((function(e){return console.log("error",e)}))}}},Se=Object(d.b)((function(e){return{name:e.name,googleUser:e.googleUser,userData:e.userData,userid:e.user_id,acctImgKey:e.acctImgKey}}),ke)((function(e){var t=e.name,a=e.googleUser,o=e.setRifferName,i=e.setRiffPic,c=e.userData,l=e.getUserData,s=e.userid,u=e.acctImgKey,d=Object(r.useState)(t),f=Object(P.a)(d,2),p=f[0],m=f[1];Object(r.useEffect)((function(){a&&l(a)}),[l,a]);return n.a.createElement("div",{className:"landing-page"},n.a.createElement(ce,null),n.a.createElement("div",{className:"title-and-url heading"},n.a.createElement("h1",{className:"heading-primary-main account-heading"},"Account Settings")),n.a.createElement("section",{className:"top-part"},a&&a.isSignedIn()?n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"visit ",n.a.createElement(ie.b,{to:"/profile/".concat(s)},"public profile")),n.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),""!==p&&o(p,a)}(e)}},n.a.createElement("label",null,n.a.createElement("h3",{className:"account-section-title"},"My Riffer Name"),n.a.createElement("input",{onChange:function(e){return function(e){e.preventDefault(),m(e.target.value)}(e)},type:"text",name:"name",defaultValue:t,className:"form-field"})),n.a.createElement("input",{type:"submit",value:"Submit",className:"btn"})),n.a.createElement("img",{key:u,src:"/get-riffer-pic/".concat(s,".png?").concat(u)}),n.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),i(e.target.children[0].files[0],a)}(e)}},n.a.createElement("input",{type:"file",name:"image"}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{type:"submit"},"Upload")),n.a.createElement("h2",{className:"account-section-title"},"My Videos"),n.a.createElement(Ae,{userData:c})):n.a.createElement(n.a.Fragment,null,n.a.createElement(F,null)," ",n.a.createElement("p",null,"to get started"))))})),Fe={getPublicUserData:function(e){return function(t){m()({method:"get",url:"/get-user-data-by-id/".concat(e)}).then((function(e){t({type:"LOAD_PUBLIC_USER_DATA",payload:e.data})})).catch((function(e){return console.log("error",e)}))}}},Pe=Object(d.b)((function(e){return{publicProfileData:e.publicProfileData,publicProfileName:e.publicProfileName}}),Fe)((function(e){var t=e.publicProfileData,a=e.publicProfileName,o=e.getPublicUserData,i=e.match.params.userID;return Object(r.useEffect)((function(){o(i)}),[o,i]),n.a.createElement("div",{className:"landing-page"},n.a.createElement(ce,null),n.a.createElement("div",{className:"title-and-url heading"},n.a.createElement("h1",{className:"heading-primary-main account-heading"},'Profile for "',a,'"')),n.a.createElement("section",{className:"top-part"},n.a.createElement("h2",{className:"account-section-title"},"Videos"),n.a.createElement(Ae,{userData:t})))})),Le={getGlobalVideoList:function(){return function(e){m()({method:"get",url:"/get-global-video-list"}).then((function(t){e({type:"LOAD_GLOBAL_VIDEO_LIST",payload:t.data})})).catch((function(e){return console.log("error",e)}))}}},Ce=Object(d.b)((function(e){return{globalVideoList:e.globalVideoList}}),Le)((function(e){var t=e.globalVideoList,a=e.getGlobalVideoList;return Object(r.useEffect)((function(){a()}),[a]),n.a.createElement("div",{className:"landing-page"},n.a.createElement(ce,null),n.a.createElement("div",{className:"title-and-url heading"},n.a.createElement("h1",{className:"heading-primary-main account-heading"},"The List")),n.a.createElement("section",{className:"top-part"},n.a.createElement("h2",{className:"account-section-title"},"every movie with at least one riff added to it"),n.a.createElement(Ae,{userData:t})))})),xe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement(ie.a,null,n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"main-section"},n.a.createElement(f.b,{exact:!0,path:"/",component:De}),n.a.createElement(f.b,{exact:!0,path:"/riff",component:ue}),n.a.createElement(f.b,{exact:!0,path:"/riff/:videoID",component:ue}),n.a.createElement(f.b,{exact:!0,path:"/about",component:Ne}),n.a.createElement(f.b,{exact:!0,path:"/view/:videoID",component:we}),n.a.createElement(f.b,{exact:!0,path:"/account",component:Se}),n.a.createElement(f.b,{exact:!0,path:"/profile/:userID",component:Pe}),n.a.createElement(f.b,{exact:!0,path:"/TheList",component:Ce}))))}}]),a}(n.a.Component),Ue=a(26),Ve=a(27),Me=["payload"],Ge={all:[],temp:null,editIndex:null},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO_ID":return Ge;case"CREATE_TEMP_AUDIO_RIFF":case"CREATE_TEMP_TEXT_RIFF":return Object(pe.a)(Object(pe.a)({},e),{},{temp:Object(pe.a)(Object(pe.a)({},e.temp),{},{type:"CREATE_TEMP_AUDIO_RIFF"===t.type?"audio":"text",time:window.rifftubePlayer.getCurrentTime(),video_id:t.videoID,tempId:(new Date).getUTCMilliseconds()}),editIndex:null});case"EDIT_RIFF":return Object(pe.a)(Object(pe.a)({},e),{},{temp:Object(pe.a)({},e.all[t.payload]),editIndex:t.payload});case"DELETE_RIFF":var a=Object(pe.a)({},e);return a.all=a.all.filter((function(e){return e.id!==t.id})),a;case"SAVE_TEMP_AUDIO":return Object(pe.a)(Object(pe.a)({},e),{},{temp:Object(pe.a)(Object(pe.a)({},e.temp),{},{duration:t.duration})});case"CANCEL_EDIT":return Object(pe.a)(Object(pe.a)({},e),{},{temp:null,editIndex:null});case"RECEIVE_RIFF_LIST":return Object(pe.a)(Object(pe.a)({},e),{},{timestamp:t.payload.timestamp,all:t.payload.body.map((function(e){return Object(pe.a)(Object(pe.a)({},e),{},{time:e.start,payload:e.isText?e.text:null,type:e.isText?"text":"audio"})}))});case"UPDATE_RIFF_TIME_SUCCESS":var r=Object(de.a)(e.all);r.forEach((function(e,a,r){e.id===t.id&&(r[a]=Object(pe.a)(Object(pe.a)({},e),{},{id:t.id,time:Number(t.time)}))}));var n=Object(pe.a)(Object(pe.a)({},e),{},{all:r});return n;case"SAVE_RIFF_SUCCESS":if("add"===t.payload.type){var o=Object(de.a)(e.all);o.forEach((function(e,a,r){e.tempId===t.payload.tempId&&(r[a]=Object(pe.a)(Object(pe.a)({},e),{},{id:t.payload.id}))}));var i=Object(pe.a)(Object(pe.a)({},e),{},{all:o});return i}return e;case"SAVE_RIFF":var c,l=t.payload,s=l.payload,u=Object(Ve.a)(l,Me),d=Object(pe.a)(Object(pe.a)({},e.temp),u);return"text"===e.temp.type&&(d.payload=s),null===e.editIndex?c=[].concat(Object(de.a)(e.all),[d]):(c=Object(de.a)(e.all))[e.editIndex]=d,{all:c,temp:null,editIndex:null};default:return e}},We=a(38),qe={saving:{},loading:{},temp:null,all:{},editIndex:null},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_TEMP_AUDIO_RIFF":case"CREATE_TEMP_TEXT_RIFF":return Object(pe.a)(Object(pe.a)({},e),{},{editIndex:null});case"SET_VIDEO_ID":return qe;case"EDIT_RIFF":return Object(pe.a)(Object(pe.a)({},e),{},{temp:e.all[t.id],editIndex:t.payload});case"SAVE_RIFF_SUCCESS":if("add"===t.payload.type){var a=e.saving,r=t.payload.tempId,n=(a[r],Object(Ve.a)(a,[r].map(We.a)));return Object(pe.a)(Object(pe.a)({},e),{},{saving:n,all:Object(pe.a)(Object(pe.a)({},e.all),{},Object(fe.a)({},t.payload.id,e.temp)),temp:null})}return e;case"SAVE_RIFF":return null===e.editIndex?Object(pe.a)(Object(pe.a)({},e),{},{saving:Object(pe.a)(Object(pe.a)({},e.saving),{},Object(fe.a)({},t.riff.tempId,!0)),editIndex:null}):Object(pe.a)(Object(pe.a)({},e),{},{all:Object(pe.a)(Object(pe.a)({},e.all),{},Object(fe.a)({},t.riff.id,t.payload.payload)),editIndex:null,temp:null});case"LOAD_RIFF":return Object(pe.a)(Object(pe.a)({},e),{},{loading:Object(pe.a)(Object(pe.a)({},e.loading),{},Object(fe.a)({},t.payload,!0))});case"RIFF_LOADED":var o=e.loading,i=t.id,c=(o[i],Object(Ve.a)(o,[i].map(We.a))),l=new Blob(new Array(t.payload),{type:"audio/mp3"});return Object(pe.a)(Object(pe.a)({},e),{},{loading:c,all:Object(pe.a)(Object(pe.a)({},e.all),{},Object(fe.a)({},t.id,l)),temp:null===e.editIndex?null:l});case"SAVE_TEMP_AUDIO":return Object(pe.a)(Object(pe.a)({},e),{},{temp:t.payload});case"CANCEL_EDIT":return Object(pe.a)(Object(pe.a)({},e),{},{temp:null,editIndex:null});default:return e}},Be=[],Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_RIFF_META":return t.payload.body.map((function(e){return Object(pe.a)(Object(pe.a)({},e),{},{time:e.start,payload:e.isText?e.text:null,type:e.isText?"text":"audio"})}));default:return e}},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO_ID":return v;case"CREATE_TEMP_AUDIO_RIFF":case"CREATE_TEMP_TEXT_RIFF":case"EDIT_RIFF":return"EDIT_MODE";case"SET_PLAYER_MODE":return t.payload;case"CANCEL_EDIT":return v;case"TOGGLE_PLAYER_MODE":return e===h?v:h;case"SAVE_RIFF":return v;default:return e}},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GOOGLE_USER_SIGNIN":return t.payload;default:return e}},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO_ID":return{};case"SET_RIFF_PLAYING":case"SET_RIFF_NOT_PLAYING":return Object(pe.a)(Object(pe.a)({},e),{},Object(fe.a)({},t.payload,"SET_RIFF_PLAYING"===t.type));default:return e}},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_NAME_UPDATE":case"RECEIVE_RIFF_LIST":case"LOAD_USER_DATA":return t.payload.name||e;default:return e}},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_RIFF_LIST":return t.payload.user_id||e;case"LOAD_USER_DATA":return t.payload.userid;default:return e}},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zZvmWtx_pfU",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO_ID":return t.payload;default:return e}},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO_DURATION":return t.payload;default:return e}},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WEB_SOCKET_UPDATE":return t.payload;default:return e}},at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USER_DATA":return t.payload.body;default:return e}},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PUBLIC_USER_DATA":return t.payload.body;default:return e}},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PUBLIC_USER_DATA":return t.payload.name;default:return e}},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_GLOBAL_VIDEO_LIST":return t.payload.body;default:return e}},it=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_TEMP_AUDIO_RIFF":return t.immediateRecord;case"SET_IMMEDIATE_OFF":return!1;default:return e}},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RECORDER":return t.payload;default:return e}},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_PIC_SUCCESS":return Date.now();default:return e}},st=Object(Ue.b)({riffs:Ye,riffsAudio:He,riffsMeta:Je,mode:ze,googleUser:Qe,riffsPlaying:Ke,name:Xe,user_id:Ze,videoID:$e,duration:et,websocket:tt,userData:at,publicProfileData:rt,publicProfileName:nt,globalVideoList:ot,immediateRecord:it,recorder:ct,acctImgKey:lt}),ut=(a(130),a(131),a(64)),dt=Object(Ue.c)(st,Object(Ue.a)(ut.a));i.a.render(n.a.createElement(d.a,{store:dt},n.a.createElement(xe,null)),document.getElementById("root"))},57:function(e,t,a){e.exports=a.p+"static/media/delete-24px.2fc9a828.svg"},58:function(e,t,a){e.exports=a.p+"static/media/edit-24px.94f6e29d.svg"},59:function(e,t,a){e.exports=a.p+"static/media/settings_voice-24px.62e607b7.svg"},60:function(e,t,a){e.exports=a.p+"static/media/chat-24px.190e0f49.svg"},62:function(e,t,a){e.exports=a.p+"static/media/undraw_movie_night_93wl.bd90a236.svg"},63:function(e,t,a){e.exports=a.p+"static/media/undraw_horror_movie_3988.a8de6ac3.svg"},65:function(e,t,a){e.exports=a(132)}},[[65,1,2]]]);
//# sourceMappingURL=main.8b00557c.chunk.js.map