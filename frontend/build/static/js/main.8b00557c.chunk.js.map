{"version":3,"sources":["fonts/Limelight-Regular.ttf","actions/index.js","components/YouTubeVideo/AllowPlayback.js","components/YouTubeVideo/YouTubeVideo.js","components/Login/Login.js","components/RiffControls/RiffDetail.js","components/RiffControls/RiffList.js","components/RiffControls/Record.js","components/RiffControls/EditRiff.js","components/RiffControls/RiffButton.js","components/RiffControls/EditControls.js","components/MetaBar.js","components/NavBar.js","components/RiffControls/EditInterface.js","components/ViewInterface/ViewFilter.js","components/ViewInterface/AuthorSelector.js","components/ViewInterface/ViewInterface.js","components/LandingPage.js","components/About.js","components/VideoList.js","components/Account.js","components/Profile.js","components/TheList.js","App.js","reducers/riffs-reducer.js","reducers/riffsAudio-reducer.js","reducers/riffsMeta-reducer.js","reducers/mode-reducer.js","reducers/googleUser-reducer.js","reducers/riffsPlaying-reducer.js","reducers/name-reducer.js","reducers/userid-reducer.js","reducers/videoID-reducer.js","reducers/videoDuration-reducer.js","reducers/websocket-reducer.js","reducers/userData-reducer.js","reducers/publicProfileData-reducer.js","reducers/publicProfileName-reducer.js","reducers/globalVideoList-reducer.js","reducers/immediate-record-reducer.js","reducers/recorder-reducer.js","reducers/acctImgKey-reducer.js","reducers/index.js","index.js","images/delete-24px.svg","images/edit-24px.svg","images/settings_voice-24px.svg","images/chat-24px.svg","images/undraw_movie_night_93wl.svg","images/undraw_horror_movie_3988.svg"],"names":["module","exports","PLAY_MODE","PAUSE_MODE","setRifferName","newName","googleUser","dispatch","axios","method","url","data","token","getAuthResponse","id_token","then","res","type","payload","catch","err","console","log","setVideoID","videoID","error","body","setPlayerMode","mode","togglePlayerMode","createTempRiff","immediateRecord","setImmediateOff","setRecorder","rawLoadAxios","id","responseType","AllowPlayback","props","componentDidMount","test","Audio","controls","src","play","setupAudioPlayers","setState","allowed","window","audioContexts","audioPlayers","audioPlayerUse","audioPlayersCount","i","AudioContext","webkitAudioContext","addEventListener","this","inUse","se","document","createElement","appendChild","srcEl","render","state","className","onClick","React","Component","mapDispatchToProps","connect","YouTubeVideo","YT","Player","loadVideo","checkForRiffsToLoad","tag","onYouTubeIframeAPIReady","firstScriptTag","getElementsByTagName","parentNode","insertBefore","rifftubePlayer","destroy","player","videoId","height","width","playerVars","playsinline","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","event","setVideoDuration","target","getDuration","t","riffs","forEach","riff","riffsAudio","all","loading","time","loadRiff","curRiff","riffsPlaying","riffInterval","setInterval","getCurrentTime","metaPlayHead","current","style","left","duration","metaUpdate","index","setRiffPlaying","audLock","setVolume","vol","getVolume","audioURL","URL","createObjectURL","lastRiff","audio","load","clearInterval","componentDidUpdate","prevProps","getPlayerState","playVideo","pauseVideo","Fragment","Object","keys","filter","map","key","playing","setGoogleUser","clientId","isSignedIn","onSuccess","gus","buttonText","editRiff","deleteRiff","riffID","video_id","websocket","send","JSON","stringify","updateRiffTime","start_time","riff_id","response","useState","visible","setVisible","useEffect","divRef","createRef","scroll","scrollTop","offsetTop","timeRef","ref","selected","seekTo","Math","max","alt","Text","step","defaultValue","toFixed","onChange","value","Edit","confirm","Delete","totalLength","sort","e1","e2","riffDetails","posStyles","top","Record","endRecord","recorder","recordingState","Date","now","startTime","finishRecording","startRecord","onComplete","blob","saveTempAudio","setOptions","timeLimit","encodeAfterRecord","mp3","bitRate","setTimeout","startRecording","userMedia","e","ret","navigator","mediaDevices","EditRiff","durationField","htmlPayloadField","startTimeField","tempRiff","editIndex","tempAudio","source","disabled","saveRiff","Number","cancelEdit","fd","FormData","append","tempId","headers","temp","RiffButton","googleUserLogout","name","blurEvent","activeElement","blur","keydownEvent","min","preventDefault","removeEventListener","onLogoutSuccess","audioContext","getUserMedia","video","stream","input","createMediaStreamSource","WebAudioRecorder","workerDir","encoding","onEncoderLoading","onEncoderLoaded","MetaBar","riffsMeta","el","find","NavBar","color","exact","activeClassName","to","EditInterface","match","params","videoIDRef","prevState","loggedIn","getRiffs","WebSocket","onmessage","msg","parse","getRiffsMeta","setWebSocket","authCheck","DefaultComponent","extractVideoID","length","vID","history","push","href","user_id","rel","ViewFilter","selectRiff","newRiff","nonOverlappingRiffs","has","selectedRiffs","Set","newFiltered","otherOverlaps","overlappingRiffs","add","set","delete","r","toDelete","curOverlap","redu","tod","size","values","next","filteredRiffs","selectDiv","scrollLeft","offsetLeft","offsetWidth","tracks","trackPos","runningRiffs","slope","toCheck","candi","includes","splice","indexOf","flag","fontSize","overflow","position","backgroundColor","trackArray","textOverflow","whiteSpace","lineHeight","verticalAlign","AuthorSelector","setMute","mute","m","muted","toggleMute","nmStr","names","join","rifferList","riffers","split","String","undefined","timestamp","arr","some","riffer","queryString","require","ViewInterface","getViewRiffs","parsed","location","search","marginTop","solo","LandingPage","MovieImage","icon","About","borderRadius","background","margin","HorrorMovie","VideoList","userData","title","count","slice","setRiffPic","getUserData","userid","acctImgKey","userName","setUserName","onSubmit","handleSubmit","handleChange","children","files","picSubmit","getPublicUserData","publicProfileData","publicProfileName","userID","getGlobalVideoList","globalVideoList","App","path","component","Account","Profile","TheList","initialState","riffsReducer","action","getUTCMilliseconds","isText","text","ind","actionPayload","saving","riffsAudioReducer","Blob","Array","riffsMetaReducer","modeReducer","googleUserReducer","riffsPlayingReducer","nameReducer","useridReducer","videoIDReducer","videoDurationReducer","webSocketReducer","userDataReducer","publicProfileDataReducer","publicProfileNameReducer","globalVideoListReducer","immediateRecordReducer","recorderReducer","acctImgKeyReducer","combineReducers","store","createStore","defaultReducer","applyMiddleware","thunkMiddleware","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.8b00557c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Limelight-Regular.6ccb9eb8.ttf\";","import axios from 'axios';\n\nexport const GOOGLE_USER_SIGNIN = 'GOOGLE_USER_SIGNIN';\n\nexport const CREATE_TEMP_AUDIO_RIFF = 'CREATE_TEMP_AUDIO_RIFF';\nexport const CREATE_TEMP_TEXT_RIFF = 'CREATE_TEMP_TEXT_RIFF';\n\nexport const EDIT_RIFF = 'EDIT_RIFF';\n\nexport const CANCEL_EDIT = 'CANCEL_EDIT';\nexport const SAVE_RIFF = 'SAVE_RIFF';\n\nexport const SAVE_RIFF_SUCCESS = 'SAVE_RIFF_SUCCESS';\nexport const SAVE_RIFF_FAILURE = 'SAVE_RIFF_FAILURE';\n\nexport const UPDATE_RIFF_TIME_SUCCESS = 'UPDATE_RIFF_TIME_SUCCESS';\n\nexport const DELETE_RIFF = 'DELETE_RIFF';\n\nexport const SAVE_TEMP_AUDIO = 'SAVE_TEMP_AUDIO';\n\nexport const SET_RIFF_PLAYING = 'SET_RIFF_PLAYING';\nexport const SET_RIFF_NOT_PLAYING = 'SET_RIFF_NOT_PLAYING';\n\nexport const LOAD_RIFF = 'LOAD_RIFF';\nexport const RIFF_LOADED = 'RIFF_LOADED';\n\nexport const SET_PLAYER_MODE = 'SET_PLAYER_MODE';\nexport const EDIT_MODE = 'EDIT_MODE';\nexport const EDIT_NEW_MODE = 'EDIT_NEW_MODE';\nexport const PLAY_MODE = 'PLAY_MODE';\nexport const PAUSE_MODE = 'PAUSE_MODE';\nexport const TOGGLE_PLAYER_MODE = 'TOGGLE_PLAYER_MODE';\n\nexport const SET_VIDEO_ID = 'SET_VIDEO_ID';\nexport const RECEIVE_NAME_UPDATE = 'RECEIVE_NAME_UPDATE';\n\nexport const RECEIVE_RIFF_LIST = 'RECEIVE_RIFF_LIST';\nexport const RECEIVE_RIFF_META = 'RECEIVE_RIFF_META';\n\nexport const TOGGLE_VIEW_USERID_MUTED = 'TOGGLE_VIEW_USERID_MUTED';\nexport const SET_VIEW_USERID_MUTED = 'SET_VIEW_USERID_MUTED';\n\nexport const RECEIVE_COLLABORATION_ID = 'RECEIVE_COLLABORATION_ID';\nexport const CREATE_PLAYLIST_SUCCESS = 'START_COLLABORATION_SUCCESS';\nexport const CREATE_PLAYLIST_FAILURE = 'START_COLLABORATION_FAILURE';\n\nexport const SET_VIDEO_DURATION = 'SET_VIDEO_DURATION';\n\nexport const LOAD_USER_DATA = 'LOAD_USER_DATA';\nexport const LOAD_PUBLIC_USER_DATA = 'LOAD_PUBLIC_USER_DATA';\nexport const LOAD_PUBLIC_USER_NAME = 'LOAD_PUBLIC_USER_NAME';\nexport const LOAD_GLOBAL_VIDEO_LIST = 'LOAD_GLOBAL_VIDEO_LIST';\n\nexport const SET_IMMEDIATE_OFF = 'SET_IMMEDIATE_OFF';\nexport const SET_IMMEDIATE_ON = 'SET_IMMEDIATE_ON';\n\nexport const SET_RECORDER = 'SET_RECORDER';\n\nexport const WEB_SOCKET_UPDATE = 'WEB_SOCKET_UPDATE';\n\nexport const SAVE_PIC_SUCCESS = 'SAVE_PIC_SUCCESS';\nexport const SAVE_PIC_FAILURE = 'SAVE_PIC_FAILURE';\n\n/******** WebSockets */\n\nexport const setWebSocket = (payload) => ({\n  type: WEB_SOCKET_UPDATE,\n  payload,\n});\n\n/******** Editing Interface */\n\nexport const setVideoDuration = (payload) => ({\n  type: SET_VIDEO_DURATION,\n  payload,\n});\n\nexport const setRifferName = (newName, googleUser) => {\n  return (dispatch) => {\n    axios({\n      method: 'post',\n      url: `/set-name`,\n      data: { token: googleUser.getAuthResponse().id_token, newName },\n    }).then((res) => {\n      dispatch({ type: RECEIVE_NAME_UPDATE, payload: res.data });\n    }).catch(err => console.log(\"error\", err));\n  };\n};\n\nexport const setRiffPic = (payload, googleUser) => {\n  return (dispatch) => {\n    let fd = new FormData();\n    fd.append('token', googleUser.getAuthResponse().id_token);\n    fd.append('image', payload);\n    axios({\n      method: 'post',\n      url: `/save-pic`,\n      data: fd,\n      headers: { 'Content-Type': 'multipart/form-data' },\n    })\n      .then((res) => {\n        // res.data.data\n        dispatch({ type: SAVE_PIC_SUCCESS, payload: res.data }); // fix these to constants\n      })\n      .catch((err) => {\n        dispatch({ type: SAVE_PIC_FAILURE, payload: err.response });\n      });\n  };\n};\n\nexport const getRiffs = (videoID, googleUser) => {\n  return (dispatch) => {\n    axios({\n      method: 'post',\n      url: `/get-riffs`,\n      data: { token: googleUser.getAuthResponse().id_token, videoID },\n    }).then((res) => {\n      dispatch({ type: RECEIVE_RIFF_LIST, payload: res.data });\n    }).catch(err => console.log(\"error\", err));\n\n    axios({\n      method: 'get',\n      url: `/get-view-riffs/${videoID}`,\n    }).then((res) => {\n      dispatch({ type: RECEIVE_RIFF_META, payload: res.data });\n    }).catch(err => console.log(\"error\", err));\n  }\n};\n\nexport const setVideoID = (videoID, googleUser) => {\n  return (dispatch) => {\n    dispatch({\n      type: SET_VIDEO_ID,\n      payload: videoID,\n    });\n    axios({\n      method: 'get',\n      url: `/get-view-riffs/${videoID}`,\n    }).then((res) => {\n      dispatch({ type: RECEIVE_RIFF_META, payload: res.data });\n    }).catch(error => {\n      dispatch({ type: RECEIVE_RIFF_META, payload: { body: [] } });\n    });\n    if (googleUser && googleUser.getAuthResponse) {\n      axios({\n        method: 'post',\n        url: `/get-riffs`,\n        data: { token: googleUser.getAuthResponse().id_token, videoID },\n      }).then((res) => {\n        dispatch({ type: RECEIVE_RIFF_LIST, payload: res.data });\n      }).catch(error => {\n        console.error(error);\n      });\n    }\n  };\n};\n\n//Delete Riff\nexport const deleteRiff = (riffID, googleUser, video_id, websocket) => {\n  return (dispatch) => {\n    axios({\n      method: 'delete',\n      url: `/riff-remove/${riffID}`,\n      data: {\n        token: googleUser.getAuthResponse().id_token,\n      },\n    }).then((res) => {\n      dispatch({ type: DELETE_RIFF, id: riffID });\n\n      // websocket call\n      websocket.send(JSON.stringify({ type: 'update', video_id }));\n    }).catch(err => console.log(\"error\", err));\n  };\n};\n\n// perhaps this action should somehow call the above action (setVideoID)?\n\n// this shit really needs to be decoupled\nexport const setGoogleUser = (googleUser) => {\n  return (dispatch) => {\n    dispatch({\n      type: GOOGLE_USER_SIGNIN,\n      payload: googleUser,\n    });\n  };\n};\n\n// perhaps this action should somehow call the above action (setVideoID)?\nexport const googleUserLogout = () => ({\n  type: GOOGLE_USER_SIGNIN,\n  payload: null,\n});\n\nexport const getRiffsMeta = (videoID) => {\n  return (dispatch) => {\n    axios({\n      method: 'get',\n      url: `/get-view-riffs/${videoID}`,\n    }).then((res) => {\n      dispatch({ type: RECEIVE_RIFF_META, payload: res.data });\n    }).catch(err => console.log(\"error\", err));\n  };\n};\n\nexport const getViewRiffs = (videoID) => {\n  return (dispatch) => {\n    axios({\n      method: 'get',\n      url: `/get-view-riffs/${videoID}`,\n    }).then((res) => {\n      dispatch({ type: RECEIVE_RIFF_LIST, payload: res.data });\n    }).catch(err => console.log(\"error\", err));\n  };\n};\n\nexport const getUserData = (googleUser) => {\n  return (dispatch) => {\n    axios({\n      method: 'get',\n      url: `/get-user-data/${googleUser.getAuthResponse().id_token}`,\n    }).then((res) => {\n      dispatch({ type: LOAD_USER_DATA, payload: res.data });\n    }).catch(err => console.log(\"error\", err));\n  };\n};\n\nexport const getPublicUserData = (id) => {\n  return (dispatch) => {\n    axios({\n      method: 'get',\n      url: `/get-user-data-by-id/${id}`,\n    }).then((res) => {\n      dispatch({ type: LOAD_PUBLIC_USER_DATA, payload: res.data });\n    }).catch(err => console.log(\"error\", err));\n  };\n};\n\nexport const getGlobalVideoList = () => {\n  return (dispatch) => {\n    axios({\n      method: 'get',\n      url: '/get-global-video-list',\n    }).then((res) => {\n      dispatch({ type: LOAD_GLOBAL_VIDEO_LIST, payload: res.data });\n    }).catch(err => console.log(\"error\", err));\n  };\n};\n\nexport const setPlayerMode = (mode) => ({\n  type: SET_PLAYER_MODE,\n  payload: mode,\n});\n\nexport const togglePlayerMode = (mode) => ({\n  type: TOGGLE_PLAYER_MODE,\n});\n\n/*export const saveRiff = payload => ({\n  type: SAVE_RIFF,\n  payload\n});*/\n\nexport const saveTempAudio = (payload, duration) => ({\n  type: SAVE_TEMP_AUDIO,\n  payload,\n  duration,\n});\n\nexport const editRiff = (payload, id, load) => {\n  return (dispatch) => {\n    dispatch({\n      type: EDIT_RIFF,\n      payload, // index\n      id,\n    });\n\n    // id is only passed when the audio riff needs loading\n    if (load) rawLoadAxios(dispatch, id); // loads riff audio\n  };\n};\n\nexport const cancelEdit = () => ({\n  type: CANCEL_EDIT,\n});\n\nexport const updateRiffTime = (token, start_time, video_id, riff_id, websocket) => {\n  return (dispatch) => {\n    axios({\n      method: 'post',\n      url: `/update-riff-time`,\n      data: { token, start_time, id: riff_id },\n    })\n      .then((res) => {\n        // res.data.data\n        dispatch({ type: UPDATE_RIFF_TIME_SUCCESS, id: riff_id, time: start_time });\n        // websocket call\n        websocket.send(\n          JSON.stringify({ type: 'update', video_id: video_id })\n        );\n      })\n      .catch((err) => {\n        dispatch({ type: SAVE_RIFF_FAILURE, payload: err.response });\n      });\n\n    // dispatch NOTHING\n  };\n}\n\nexport const saveRiff = (token, payload, riff, websocket) => {\n  return (dispatch) => {\n    let fd = new FormData();\n    fd.append('token', token);\n    fd.append(riff.type === 'text' ? 'text' : 'blob', payload.payload);\n    fd.append('type', riff.type);\n    fd.append(\n      'duration',\n      riff.type === 'text' ? payload.duration : riff.duration // how can this be right? (I should just relax)\n    );\n    fd.append('start_time', payload.time);\n    fd.append('video_id', riff.video_id);\n    fd.append('tempId', riff.tempId);\n\n    // this may be null, and that's ok\n    fd.append('id', riff.id);\n\n    axios({\n      method: 'post',\n      url: `/save-riff`,\n      data: fd,\n      headers: { 'Content-Type': 'multipart/form-data' },\n    })\n      .then((res) => {\n        // res.data.data\n        dispatch({ type: SAVE_RIFF_SUCCESS, payload: res.data });\n        // websocket call\n        websocket.send(\n          JSON.stringify({ type: 'update', video_id: riff.video_id })\n        );\n      })\n      .catch((err) => {\n        dispatch({ type: SAVE_RIFF_FAILURE, payload: err.response });\n      });\n\n    // dispatch local save command (clears temp audio)\n    dispatch({ type: SAVE_RIFF, payload, riff });\n  };\n};\n\nexport const createTempRiff = (type, videoID, immediateRecord = false) => ({\n  type: type === 'audio' ? CREATE_TEMP_AUDIO_RIFF : CREATE_TEMP_TEXT_RIFF,\n  videoID,\n  immediateRecord,\n});\n\nexport const setImmediateOn = () => ({\n  type: SET_IMMEDIATE_ON,\n});\n\nexport const setImmediateOff = () => ({\n  type: SET_IMMEDIATE_OFF,\n});\n\nexport const setRecorder = (payload) => ({\n  type: SET_RECORDER,\n  payload,\n});\n\nexport const setRiffPlaying = (index, playing) => ({\n  type: playing ? SET_RIFF_PLAYING : SET_RIFF_NOT_PLAYING,\n  payload: index,\n});\n\nexport const loadRiff = (id, load) => {\n  return (dispatch) => {\n    dispatch({ type: LOAD_RIFF, payload: id });\n    rawLoadAxios(dispatch, id);\n  };\n};\n\nconst rawLoadAxios = (dispatch, id) => {\n  axios({\n    method: 'get',\n    url: `/load-riff/${id}`,\n    responseType: 'arraybuffer',\n  }).then((res) => {\n    dispatch({ type: RIFF_LOADED, payload: res.data, id });\n  }).catch(err => console.log(\"error\", err));\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { setPlayerMode, PLAY_MODE } from '../../actions/index.js';\n\nclass AllowPlayback extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { allowed: false };\n  }\n\n  componentDidMount = () => {\n    var test = new Audio();\n    test.controls = false;\n    test.src = '/dingdong.wav';\n    test\n      .play()\n      .then(() => {\n        this.setupAudioPlayers();\n      })\n      .catch(() => {\n        console.error('playback not allowed');\n      });\n  };\n\n  setupAudioPlayers = () => {\n    this.setState({ allowed: true });\n    window.audioContexts = [];\n    window.audioPlayers = [];\n    window.audioPlayerUse = [];\n    window.audioPlayersCount = 5;\n    for (let i = 0; i < 5; i++) {\n      window.audioContexts[i] = new (window.AudioContext ||\n        window.webkitAudioContext)();\n\n      window.audioPlayers[i] = new Audio(); // should be identical behavior to: document.createElement('audio');\n      window.audioPlayers[i].controls = false;\n      window.audioPlayers[i].addEventListener('ended', function () {\n        this.inUse = false;\n      });\n\n      let se = document.createElement('source');\n      window.audioPlayers[i].appendChild(se);\n      window.audioPlayers[i].srcEl = se;\n    }\n  };\n\n  render = () => {\n    //if (!this.state) return null;\n\n    return !this.state.allowed ? (\n      <div\n        className=\"audio-capture\"\n        onClick={() => {\n          this.setupAudioPlayers();\n          this.props.setPlayerMode(PLAY_MODE);\n        }}\n      />\n    ) : null;\n  };\n}\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = {\n  setPlayerMode,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AllowPlayback);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  setPlayerMode,\n  setRiffPlaying,\n  loadRiff,\n  togglePlayerMode,\n  setVideoDuration,\n  EDIT_MODE,\n  EDIT_NEW_MODE,\n  PLAY_MODE,\n  PAUSE_MODE,\n} from '../../actions/index.js';\nimport AllowPlayback from './AllowPlayback.js';\n\n// based on https://stackoverflow.com/questions/54017100/how-to-integrate-youtube-iframe-api-in-reactjs-solution\n\nclass YouTubeVideo extends React.Component {\n  componentDidMount = () => {\n    // On mount, check to see if the API script is already loaded\n\n    if (!window.YT || !window.YT.Player) {\n      // If not, load the script asynchronously\n      const tag = document.createElement('script');\n      tag.src = 'https://www.youtube.com/iframe_api';\n\n      // onYouTubeIframeAPIReady will load the video after the script is loaded\n      window.onYouTubeIframeAPIReady = this.loadVideo;\n\n      const firstScriptTag = document.getElementsByTagName('script')[0];\n      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n    } // If script is already there, load the video directly\n    else {\n      this.loadVideo();\n      this.checkForRiffsToLoad(0); // check if any riffs at < 10s in need loading\n    }\n  };\n\n  loadVideo = () => {\n    if (!window.YT) return; // can be called by componentDidUpdate before window.YT has loaded\n\n    const { id } = this.props;\n\n    if (window.rifftubePlayer) window.rifftubePlayer.destroy();\n\n    this.player = new window.YT.Player('rifftube-player', {\n      videoId: id,\n      height: 390,\n      width: 640,\n      playerVars: {\n        playsinline: 1, // allows it to play inline on iOS\n      },\n      events: {\n        onReady: this.onPlayerReady,\n        onStateChange: this.onPlayerStateChange,\n      },\n    });\n\n    window.rifftubePlayer = this.player; // store global reference (used to get current playback time when needed)\n  };\n\n  onPlayerReady = (event) => {\n    //event.target.playVideo();\n\n    this.props.setVideoDuration(event.target.getDuration());\n  };\n\n  // TODO: account for muted riffs!!!!\n  checkForRiffsToLoad = (t) => {\n    this.props.riffs.forEach((riff) => {\n      if (\n        // if no id, it's being saved\n        riff.id &&\n        //if it's an audio riff\n        riff.type === 'audio' &&\n        //if it's not loaded already\n        !this.props.riffsAudio.all[riff.id] && //!riff.payload &&\n        //if it's not loading\n        !this.props.riffsAudio.loading[riff.id] && //!riff.loading &&\n        // if the riff is in the future\n        riff.time >= t &&\n        // but is less than 10 seconds in the future\n        riff.time < t + 10\n      )\n        // load the riff to be played at the right time\n        this.props.loadRiff(riff.id);\n    });\n  };\n\n  onPlayerStateChange = ({ data }) => {\n    /*\n        -1 (unstarted)\n        0 (ended)\n        1 (playing)\n        2 (paused)\n        3 (buffering)\n        5 (video cued).\n        */\n\n    // the following conditional leaves out some 'else's that should never occur\n\n    if (data === 1) {\n      // playing\n\n      // the following code is\n      // needed I think... for pausing during a riff.\n      // so that (subsiquent) 'zombie' riffs can be killed,\n      // I think.\n      this.curRiff = this.props.riffsPlaying;\n\n      /*******************************************************/\n      // this timer is responsible for showing and hiding riffs\n      this.riffInterval = setInterval(() => {\n        if (\n          !(\n            window.rifftubePlayer &&\n            typeof window.rifftubePlayer.getCurrentTime == 'function'\n          )\n        )\n          return;\n\n        let t = window.rifftubePlayer.getCurrentTime();\n\n        // if the MetaBar component exists, update its playhead\n        if (window.metaPlayHead && window.metaPlayHead.current) {\n          window.metaPlayHead.current.style.left = `${\n            (t / this.props.duration) * 100\n          }%`;\n          if (window.metaUpdate) window.metaUpdate(window.metaPlayHead.current);\n        }\n\n        //\n        this.checkForRiffsToLoad(t);\n\n        // first stop any zombie riffs\n        this.props.riffs.forEach((riff, index) => {\n          if (\n            this.curRiff[index] &&\n            (t < riff.time || t > riff.time + riff.duration)\n          ) {\n            if (this.curRiff[index].inUse) this.curRiff[index].inUse = false;\n\n            // by setting this to false, text riffs will be hidden\n            this.props.setRiffPlaying(index, false);\n            this.curRiff[index] = null;\n\n            if (riff.type === 'audio')\n              // make sure all audio clips have stopped\n              this.audLock--;\n            if (!this.audLock) {\n              window.rifftubePlayer.setVolume(this.vol ? this.vol : 100); // hopefully unnecessary volume failsafe\n              delete this.vol;\n            }\n          }\n        });\n\n        // next start any that should be playing\n        this.props.riffs.forEach((riff, index) => {\n          // the riff will start playing within half a second, or will be skipped\n          if (!this.curRiff[index] && t > riff.time && t < riff.time + 0.5) {\n            this.props.setRiffPlaying(index, true);\n            this.curRiff[index] = true; // used for text only; overwritten for audio\n\n            if (riff.type === 'audio') {\n              if (!this.vol) {\n                this.vol = window.rifftubePlayer.getVolume();\n                window.rifftubePlayer.setVolume(this.vol * 0.25);\n              }\n\n              // keeps track of how many audio tracks need to end before volume should be restored\n              if (!this.audLock) this.audLock = 1;\n              else this.audLock++;\n\n              if (!this.props.riffsAudio.all[riff.id]) {\n                //(!riff.payload) {\n                return;\n              } // DEBUG - SHOULD BE REMOVED\n              var audioURL = URL.createObjectURL(\n                this.props.riffsAudio.all[riff.id]\n              ); //(riff.payload);\n              //debugger;\n\n              window.lastRiff = this.props.riffsAudio.all[riff.id]; // riff.payload;\n\n              // FIX THIS:\n\n              for (let i = 0; i < window.audioPlayersCount; i++) {\n                /*\n                if ( window.audioContexts[i].inUse ) continue;\n                let audioContext = window.audioContexts[i];\n                window.audioContexts[i].inUse = true;\n                var blob = riff.payload;\n                new Response(blob).arrayBuffer().then(function(arrayBuffer) {\n                  window.audioContexts[0].decodeAudioData(arrayBuffer, audioData => {\n                    debugger;\n                    var source = window.audioContexts[i].createBufferSource();\n                    source.buffer = audioData;\n                    source.connect(window.audioContexts[i].destination);\n                    source.start()\n                  })\n                });\n                */\n\n                let audio = window.audioPlayers[i];\n                if (audio.inUse) continue;\n                audio.inUse = true;\n\n                // TEST:\n                audio.srcEl.src = audioURL;\n                audio.load();\n                audio.play();\n\n                /*\n                var se = document.createElement('source');\n                audio.appendChild(se);\n                se.src = audioURL;\n                //se.type = 'audio/webm';\n                audio.load();\n                audio.play();\n                */\n\n                // ORIG:\n                /*\n                audio.src = audioURL;\n                audio.play();\n                */\n\n                this.curRiff[index] = audio; // audioContext;\n                break;\n              }\n            }\n          }\n        });\n      }, 100); // 100/1000 = 1/10 s\n\n      if (this.props.mode !== PLAY_MODE) {\n        // change mode state\n        this.props.setPlayerMode(PLAY_MODE);\n      }\n    } // not playing\n    else {\n      // stop riff-check interval when not playing\n      clearInterval(this.riffInterval);\n\n      if (this.props.mode === PLAY_MODE) {\n        // change mode state\n        this.props.setPlayerMode(PAUSE_MODE);\n      }\n    }\n  };\n\n  componentDidUpdate = (prevProps) => {\n    // seems needed on more than just mounting\n    // (makes sense; the riff meta takes some time to load)\n    this.checkForRiffsToLoad(0); // check if any riffs at < 10s in need loading\n\n    if (this.props.id !== prevProps.id) this.loadVideo();\n\n    if (!(this.player && this.player.getPlayerState)) return;\n\n    if (this.props.mode !== prevProps.mode) {\n      if (\n        (this.props.mode === EDIT_MODE ||\n          this.props.mode === EDIT_NEW_MODE ||\n          this.props.mode === PAUSE_MODE) &&\n        this.player.getPlayerState() === 1\n      ) {\n        this.player.pauseVideo();\n      } else if (\n        this.props.mode === PLAY_MODE &&\n        this.player.getPlayerState() !== 1\n      ) {\n        this.player.playVideo();\n      }\n    }\n  };\n\n  render = () => {\n    return (\n      <React.Fragment>\n        <div className=\"rifftube-container\">\n          <AllowPlayback />\n          <div className=\"rifftube-overlay\">\n            <div className=\"rifftube-riffs-container\">\n              {Object.keys(this.props.riffsPlaying)\n                .filter(\n                  (i) =>\n                    this.props.riffsPlaying[i] &&\n                    this.props.riffs[i] &&\n                    this.props.riffs[i].type === 'text'\n                )\n                .map((key) => (\n                  <div\n                    key={this.props.riffs[key].id}\n                    className=\"rifftube-textriff\"\n                  >\n                    {this.props.riffs[key].payload}\n                  </div>\n                ))}\n            </div>\n          </div>\n          <div id=\"rifftube-player\" />\n        </div>\n      </React.Fragment>\n    );\n  };\n}\n\nconst mapStateToProps = (state) => ({\n  mode: state.mode,\n  //riffs: state.riffs.all,\n  riffsPlaying: state.riffsPlaying,\n  googleUser: state.googleUser,\n  duration: state.duration,\n  riffsAudio: state.riffsAudio,\n});\n\nconst mapDispatchToProps = {\n  setPlayerMode,\n  setRiffPlaying,\n  togglePlayerMode,\n  loadRiff,\n  setVideoDuration,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(YouTubeVideo);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { GoogleLogin } from 'react-google-login';\nimport { setGoogleUser } from '../../actions/index.js';\n\nconst Login = ({ setGoogleUser, videoID }) => (\n  <GoogleLogin\n    clientId=\"941154439836-s6iglcrdckcj6od74kssqsom58j96hd8.apps.googleusercontent.com\"\n    className=\"google-login\"\n    isSignedIn\n    onSuccess={(gus) => {\n      setGoogleUser(gus, videoID);\n    }}\n    buttonText=\"Login With Google\"\n  />\n);\n\nconst mapStateToProps = (state) => ({\n  videoID: state.videoID,\n});\n\nconst mapDispatchToProps = {\n  setGoogleUser,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n","import React, { useState, useEffect, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport { editRiff, deleteRiff, updateRiffTime } from '../../actions/index.js';\nimport Delete from '../../images/delete-24px.svg';\nimport Edit from '../../images/edit-24px.svg';\nimport Audio from '../../images/settings_voice-24px.svg';\nimport Text from '../../images/chat-24px.svg';\n\n/* this component is where a user can edit their riff */\nfunction RiffDetail(props) {\n  const [visible, setVisible] = useState(false);\n\n  //useEffect(() => { setTimeout(() => {setVisible(true);}, 20000); }, []);\n  useEffect(() => {\n    setVisible(true);\n  }, []);\n\n  const divRef = createRef();\n\n  useEffect(() => {\n    if (props.scroll)\n      divRef.current.parentNode.scrollTop = divRef.current.offsetTop;\n  }, [divRef, props.scroll]);\n\n  const timeRef = createRef();\n\n  return (\n    <div\n      ref={divRef}\n      className={`riff-detail${props.selected ? ' riff-detail-selected' : ''}${\n        visible ? '' : ' invisible'\n      }`}\n      style={props.style}\n    >\n      <button\n        onClick={() => {\n          window.rifftubePlayer.seekTo(Math.max(props.time - 3, 0), true);\n        }}\n      >\n        jump to\n      </button>\n      {props.type === 'audio' ? (\n        <div className=\"audio-icon riff-type-icon\">\n          <img alt=\"audio\" src={Audio} />\n        </div>\n      ) : (\n        <div className=\"text-icon riff-type-icon\">\n          <img alt=\"text\" src={Text} />\n        </div>\n      )}\n      {/* \n      <li>\n        start time: {props.time ? props.time.toFixed(2) : null}\n      </li>\n      <li>duration: {props.duration.toFixed(2)}secs</li>\n      <li>type: {props.type}</li>\n      */}\n      <input\n        type=\"number\"\n        className=\"edit-time\"\n        step=\"0.5\"\n        defaultValue={props.time.toFixed(2)}\n        ref={timeRef}\n        onChange={() => {\n          props.updateRiffTime(\n            props.googleUser.getAuthResponse().id_token,\n            timeRef.current.value,\n            props.video_id,\n            props.id,\n            props.websocket\n          );\n        }}\n      ></input>\n      <div className=\"edit-riff-buttons\">\n        <button\n          className=\"riff-button\"\n          onClick={() =>\n            props.editRiff(\n              props.index,\n              props.type === 'audio' ? props.id : null, // weird but ok; yields id or null/false\n              !props.riffsAudio.all[props.id]\n            )\n          }\n        >\n          <img alt=\"edit button\" src={Edit} />\n        </button>\n        <button\n          className=\"riff-button\"\n          onClick={() => {\n            if (window.confirm('Delete?'))\n              props.deleteRiff(\n                props.id,\n                props.googleUser,\n                props.video_id,\n                props.websocket\n              );\n          }}\n        >\n          <img alt=\"delete button\" src={Delete} />\n        </button>\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  googleUser: state.googleUser,\n  riffsAudio: state.riffsAudio,\n  websocket: state.websocket,\n});\n\nconst mapDispatchToProps = {\n  editRiff,\n  deleteRiff,\n  updateRiffTime,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RiffDetail);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport RiffDetail from './RiffDetail.js';\n\n/* this component maps over all of the user's riffs for this video */\nfunction RiffList(props) {\n  var totalLength = 0;\n  const riffs = props.riffs\n    ? props.riffs.sort((e1, e2) => e1.time - e2.time)\n    : [];\n\n  var scroll = true;\n  const riffDetails = [];\n  for (const index in riffs) {\n    const riff = riffs[index];\n    const posStyles = {};\n    if (riff.time > totalLength) {\n      posStyles.top = `${riff.time / 10}em`;\n      totalLength = riff.time + Math.max(riff.duration, 45);\n    } else {\n      posStyles.top = `${totalLength / 10}em`;\n      totalLength += Math.max(riff.duration, 45);\n    }\n    posStyles.height = `${Math.max(riff.duration / 10, 4.5)}em`;\n    riffDetails[index] = (\n      <RiffDetail\n        key={riff.id}\n        style={posStyles}\n        {...riff}\n        index={index}\n        selected={props.riffsPlaying[index]}\n        scroll={props.riffsPlaying[index] && scroll}\n      />\n    );\n    if (props.riffsPlaying[index]) scroll = false;\n  }\n\n  return (\n    <div className=\"list-of-riffs\" style={{ height: `${totalLength / 10}em` }}>\n      {riffDetails}\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  riffs: state.riffs.all,\n  riffsPlaying: state.riffsPlaying,\n});\n\nexport default connect(mapStateToProps, null)(RiffList);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  setImmediateOff,\n} from '../../actions/index.js';\n\nclass Record extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      recordingState: false,\n    };\n  }\n\n  // arrow classes bind the methods properly\n\n  endRecord = () => {\n    if (this.props.recorder == null) return; // do nothing if recording isn't yet allowed\n\n    this.setState({ recordingState: false });\n    this.duration = (Date.now() - this.startTime) / 1000;\n\n    // experimenting this.state.gumStream.getAudioTracks()[0].stop();\n    this.props.recorder.finishRecording();\n\n    // create new stream -- NEEDED???? experimenting\n    /*navigator.mediaDevices\n      .getUserMedia({ audio: true, video: false })\n      .then((stream) => {\n        this.setState({ gumStream: stream });\n      })\n      .catch(function (err) {\n        //enable the record button if getUSerMedia() fails\n        console.log(\"oops, can't get stream\", err);\n      });\n      */\n  }\n\n  componentDidMount() {\n    console.log(\"record CDM\", this.props.userMedia);\n    if ( this.props.immediateRecord )\n    {\n      console.log(\"start immediately\");\n      this.startRecord();\n      setImmediateOff();\n      window.addEventListener('keyup', (e) => { if (e.key == 'r') this.endRecord(); });\n    }\n  }\n\n\n  startRecord = () => {\n    if (this.props.recorder == null) return; // do nothing if recording isn't yet allowed\n\n    this.setState({ recordingState: true });\n    this.startTime = Date.now();\n    //this.state.mediaRecorder.start();\n    this.props.recorder.onComplete = (recorder, blob) => {\n      //createDownloadLink(blob, recorder.encoding);\n      this.props.saveTempAudio(blob, this.duration);\n    };\n    this.props.recorder.setOptions({\n      timeLimit: 120,\n      encodeAfterRecord: true,\n      mp3: {\n        bitRate: 160,\n      },\n    });\n\n    //start the recording process\n    setTimeout( () => this.props.recorder.startRecording(), 200 ); // delay start to avoid clicks and taps\n  }\n\n  render() {\n    var ret; // var for the value to be returned\n\n    if (navigator.mediaDevices) {\n      if (!this.state.recordingState) {\n        ret = (\n          <button\n            id=\"recordBtn\"\n            onClick={this.startRecord}\n          >\n            Record\n          </button>\n        );\n      } else {\n        ret = (\n          <button\n            id=\"stopBtn\"\n            onClick={this.endRecord}\n          >\n            stop\n          </button>\n        );\n      }\n    } else\n      ret = (\n        <span>\n          Your device is not supported by navigator.mediaDevices. Sorry.\n        </span>\n      );\n\n    return <React.Fragment>{ret}</React.Fragment>;\n  }\n}\n\n\n\nconst mapStateToProps = (state) => ({\n  immediateRecord: state.immediateRecord,\n  recorder: state.recorder,\n});\n\nconst mapDispatchToProps = {\n  setImmediateOff,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Record);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Record from './Record.js';\nimport {\n  saveRiff,\n  setPlayerMode,\n  saveTempAudio,\n  cancelEdit,\n  EDIT_MODE,\n} from '../../actions/index.js';\n\nclass EditRiff extends React.Component {\n  constructor(props) {\n    super(props);\n    this.durationField = React.createRef();\n    this.htmlPayloadField = React.createRef();\n    this.startTimeField = React.createRef();\n  }\n\n\n\n  render() {\n    console.log('ed rif red');\n    return (\n      <div className=\"edit-riff\">\n        <div className=\"edit-riff-inner\">\n          {this.props.tempRiff.type === 'audio' ? (\n            <React.Fragment>\n              {this.props.mode === EDIT_MODE &&\n              this.props.editIndex &&\n              !this.props.tempAudio ? (\n                <span>Loading...</span>\n              ) : null}\n              <Record saveTempAudio={this.props.saveTempAudio} />\n              {this.props.tempAudio ? (\n                <button\n                  onClick={async () => {\n                    debugger;\n                \n                    // https://stackoverflow.com/questions/43620594/audio-blob-not-working-in-ios-safari\n                    // answer by scottmizo\n                \n                    /*\n                    var blob = this.props.tempAudio;\n                    var audioContext = new (window.webkitAudioContext || window.AudioContext)();\n                    var arrayBuffer = await (new Response(blob)).arrayBuffer();\n                    audioContext.decodeAudioData(arrayBuffer, audioData => {\n                      var source = audioContext.createBufferSource();\n                      source.buffer = audioData;\n                      source.connect(audioContext.destination);\n                      source.start()\n                    });\n                    */\n                \n                    var audio = document.createElement('audio');\n                    var source = document.createElement('source');\n                    audio.appendChild(source);\n                \n                    audio.controls = false;\n                    var audioURL = URL.createObjectURL(this.props.tempAudio);\n                \n                    source.src = audioURL;\n                    audio.load();\n                \n                    //audio.src = audioURL;\n                    audio.play();\n                  }}\n                >\n                  Play\n                </button>\n              ) : null}\n              <br />\n              <div>\n                Start:{' '}\n                <input\n                  id=\"riff-start-field\"\n                  defaultValue={this.props.tempRiff.time}\n                  ref={this.startTimeField}\n                />\n              </div>\n              <button\n                disabled={!this.props.tempAudio}\n                onClick={() => {\n                  this.props.saveRiff(\n                    this.props.googleUser.getAuthResponse().id_token,\n                    {\n                      payload: this.props.tempAudio,\n                      time: Number(this.startTimeField.current.value),\n                    },\n                    this.props.tempRiff\n                  );\n                }}\n              >\n                Save\n              </button>\n            </React.Fragment>\n          ) : (\n            <React.Fragment>\n              <div>HTML payload:</div>\n              <textarea\n                id=\"riff-edit-field\"\n                ref={this.htmlPayloadField}\n                defaultValue={this.props.tempRiff.payload}\n              />\n\n              <div>\n                Duration:{' '}\n                <input\n                  id=\"riff-duration-field\"\n                  defaultValue={this.props.tempRiff.duration || 2}\n                  ref={this.durationField}\n                />\n              </div>\n              <div>\n                Start:{' '}\n                <input\n                  id=\"riff-start-field\"\n                  defaultValue={this.props.tempRiff.time}\n                  ref={this.startTimeField}\n                />\n              </div>\n              <button\n                onClick={() => {\n                  this.props.saveRiff(\n                    this.props.googleUser.getAuthResponse().id_token,\n                    {\n                      payload: this.htmlPayloadField.current.value,\n                      duration: Number(this.durationField.current.value),\n                      time: Number(this.startTimeField.current.value),\n                    },\n                    this.props.tempRiff,\n                    this.props.websocket\n                  );\n                }}\n              >\n                Save\n              </button>\n            </React.Fragment>\n          )}\n\n          <button\n            onClick={() => {\n              this.props.cancelEdit();\n            }}\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  mode: state.mode,\n  tempRiff: state.riffs.temp,\n  tempAudio: state.riffsAudio.temp,\n  editIndex: state.riffs.editIndex,\n  googleUser: state.googleUser,\n  websocket: state.websocket,\n});\n\nconst mapDispatchToProps = {\n  setPlayerMode,\n  saveRiff,\n  saveTempAudio,\n  cancelEdit,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditRiff);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { createTempRiff } from '../../actions/index.js';\n\nclass RiffButton extends React.Component {\n  render() {\n    return (\n      <button\n        className=\"riff-button\"\n        onClick={() => {\n          this.props.createTempRiff(this.props.type, this.props.videoID);\n        }}\n      >\n        {this.props.type}\n      </button>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  videoID: state.videoID,\n});\n\nconst mapDispatchToProps = {\n  createTempRiff,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RiffButton);\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { GoogleLogout } from 'react-google-login';\n\nimport RiffList from './RiffList.js';\nimport EditRiff from './EditRiff.js';\nimport RiffButton from './RiffButton.js';\nimport { setRifferName, googleUserLogout } from '../../actions'; // this and below are the same file\nimport { EDIT_MODE, EDIT_NEW_MODE } from '../../actions';\n\nimport { createTempRiff, togglePlayerMode, setRecorder } from '../../actions/index.js';\n\n/*This component houses all of the riff buttons and the rifflist*/\nfunction EditControls(props) {\n  useEffect(() => {\n    const blurEvent = () => {\n      setTimeout(() => {\n        document.activeElement.blur();\n      }, 100);\n    };\n    window.addEventListener('blur', blurEvent);\n    const keydownEvent = (e) => {\n      console.log(props.mode);\n\n      if (e.key === 'r') props.createTempRiff('audio', props.videoID, true);\n      else if (e.key === 't') props.createTempRiff('text', props.videoID);\n      else if (props.mode === EDIT_MODE || props.mode === EDIT_NEW_MODE) return;\n      else if (e.key === 'j' || e.key === 'ArrowLeft' || e.key === 'Left')\n        // I actually took MS specific BS into account\n        window.rifftubePlayer.seekTo(\n          Math.max(window.rifftubePlayer.getCurrentTime() - 5, 0),\n          true\n        );\n      else if (e.key === 'l' || e.key === 'ArrowRight' || e.key === 'Right')\n        window.rifftubePlayer.seekTo(\n          Math.min(window.rifftubePlayer.getCurrentTime() + 5, props.duration),\n          true\n        );\n      else if (e.key === ' ' || e.key === 'k') {\n        props.togglePlayerMode();\n        e.preventDefault();\n      }\n    };\n    window.addEventListener('keydown', keydownEvent);\n\n    return () => {\n      window.removeEventListener('blur', blurEvent);\n      window.removeEventListener('keydown', keydownEvent);\n    };\n  }, [props]);\n\n  return (\n    <div className=\"control-panel\">\n      {\n        // make this into a component?:\n        props.name ? (\n          <React.Fragment>\n            <div className=\"riffer-name\">\n              Riffer Name:&nbsp;\n              {props.name}\n            </div>\n            <GoogleLogout\n              clientId=\"941154439836-s6iglcrdckcj6od74kssqsom58j96hd8.apps.googleusercontent.com\"\n              buttonText=\"Logout\"\n              onLogoutSuccess={() => props.googleUserLogout()}\n            ></GoogleLogout>\n          </React.Fragment>\n        ) : null\n      }\n\n      {/* to add back later <Collaboration /> */}\n\n      <div>\n        <h2 className=\"add-riff-title\">Add New Riff</h2>\n        {\n          props.recorder !== null ?\n            <RiffButton type=\"audio\" />\n          :\n            <button onClick={() => {\n              var AudioContext =\n                window.AudioContext || window.webkitAudioContext; // Default // Safari and old versions of Chrome\n              var audioContext = new AudioContext();\n              if (navigator.mediaDevices) {\n                navigator.mediaDevices\n                  .getUserMedia({ audio: true, video: false })\n                  .then((stream) => {\n                    // gum (get user media)\n                    var input = audioContext.createMediaStreamSource(stream);\n                \n                    var recorder = new window.WebAudioRecorder(input, {\n                      workerDir: '/lib/',\n                      encoding: 'mp3',\n                      onEncoderLoading: (recorder, encoding) => {\n                        // show \"loading encoder...\" display\n                        console.log('Loading ' + encoding + ' encoder...');\n                      },\n                      onEncoderLoaded: (recorder, encoding) => {\n                        // hide \"loading encoder...\" display\n                        console.log(encoding + ' encoder loaded');\n                      },\n                    });\n                    props.setRecorder(recorder);\n                  })\n                  .catch(function (err) {\n                    //enable the record button if getUSerMedia() fails\n                    console.log(\"oops, can't get stream\", err);\n                  });\n              }\n            }}>\n              Click to allow recording\n            </button>\n        }\n        <RiffButton type=\"text\" />\n\n        {props.mode === EDIT_MODE || props.mode === EDIT_NEW_MODE ? (\n          <EditRiff />\n        ) : null}\n      </div>\n      <h2 className=\"riff-list-title\">Control Panel</h2>\n      <RiffList />\n    </div>\n  );\n}\n\nlet mapStateToProps = (state) => ({\n  mode: state.mode,\n  name: state.name,\n  googleUser: state.googleUser,\n  videoID: state.videoID,\n  duration: state.duration,\n  recorder: state.recorder,\n});\n\nconst mapDispatchToProps = {\n  setRifferName,\n  googleUserLogout,\n  createTempRiff,\n  togglePlayerMode,\n  setRecorder,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditControls);\n","import React, { createRef } from 'react';\n\nconst MetaBar = ({ riffsMeta, riffs, duration }) => {\n  window.metaPlayHead = createRef();\n  return (\n    <div className=\"container-riff-meta\">\n      <div id=\"meta-play-head\" ref={window.metaPlayHead} />\n      {riffsMeta &&\n        duration &&\n        riffs &&\n        riffsMeta\n          .filter((el) => !riffs.find((t) => el.id === t.id))\n          .map((riff) => (\n            <div\n              key={riff.id}\n              className=\"riff-meta\"\n              style={{\n                left: (riff.time / duration) * 100 + '%',\n                width: (riff.duration / duration) * 100 + '%',\n              }}\n            />\n          ))}\n      {riffs &&\n        riffs.map((riff) => (\n          <div\n            key={riff.id}\n            className=\"riff-own-meta\"\n            style={{\n              left: (riff.time / duration) * 100 + '%',\n              width: (riff.duration / duration) * 100 + '%',\n            }}\n          ></div>\n        ))}\n    </div>\n  );\n};\n\nexport default MetaBar;\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst NavBar = ({ color }) => (\n  <nav className=\"navbar\">\n    <NavLink\n      exact\n      activeClassName=\"navbar-link-active\"\n      style={{ color }}\n      to=\"/\"\n    >\n      Home\n    </NavLink>\n    <NavLink activeClassName=\"navbar-link-active\" style={{ color }} to=\"/riff\">\n      Riff<em>!</em>\n    </NavLink>\n    <NavLink\n      activeClassName=\"navbar-link-active\"\n      style={{ color }}\n      to=\"/TheList\"\n    >\n      The List\n    </NavLink>\n    <NavLink activeClassName=\"navbar-link-active\" style={{ color }} to=\"/about\">\n      About\n    </NavLink>\n    <NavLink\n      activeClassName=\"navbar-link-active\"\n      style={{ color }}\n      to=\"/account\"\n    >\n      My Account\n    </NavLink>\n  </nav>\n);\n\nexport default NavBar;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport YouTubeVideo from '../YouTubeVideo/YouTubeVideo';\nimport Login from '../Login/Login';\nimport EditControls from './EditControls';\nimport {\n  setVideoID,\n  setWebSocket,\n  getRiffsMeta,\n  getRiffs,\n  setRecorder,\n} from '../../actions';\nimport MetaBar from '../MetaBar';\nimport NavBar from '../NavBar.js';\n\nclass EditInterface extends React.Component {\n  constructor(props) {\n    super(props);\n    this.videoIDRef = React.createRef();\n  }\n\n  componentDidMount = () => {\n    if (this.props.match.params.videoID) {\n      this.props.setVideoID(\n        this.props.match.params.videoID,\n        this.props.googleUser\n      );\n      this.videoIDRef.current.value = this.props.match.params.videoID;\n    }\n  };\n\n  componentDidUpdate = (prevProps, prevState) => {\n    if (this.props.match.params.videoID !== this.props.videoID) {\n      this.props.setVideoID(\n        this.props.match.params.videoID,\n        this.props.googleUser\n      );\n      this.videoIDRef.current.value = this.props.match.params.videoID;\n    }\n\n    if (\n      this.loggedIn() &&\n      this.props.videoID &&\n      this.props.googleUser !== prevProps.googleUser\n    ) {\n      this.props.getRiffs(this.props.videoID, this.props.googleUser);\n    }\n\n    if (\n      this.loggedIn() &&\n      (!this.props.websocket || this.props.videoID !== prevProps.videoID)\n    ) {\n      //const websocket = new WebSocket( `ws://localhost:3300/riff?videoID=${this.props.match.params.videoID}&googleToken=${this.props.googleUser.getAuthResponse().id_token}` );\n      var baseURL;\n      if (process.env.NODE_ENV === 'production')\n        baseURL = 'wss://rifftube.herokuapp.com';\n      else baseURL = 'ws://localhost:3300';\n\n      const websocket = new WebSocket(\n        `${baseURL}/riff?videoID=${\n          this.props.match.params.videoID\n        }&googleToken=${this.props.googleUser.getAuthResponse().id_token}`\n      );\n      websocket.onmessage = (event) => {\n        console.log(event.data);\n\n        const msg = JSON.parse(event.data);\n\n        if (msg.video_id === this.props.videoID && msg.type === 'update')\n          this.props.getRiffsMeta(this.props.videoID);\n      };\n      this.props.setWebSocket(websocket);\n    }\n  };\n\n  loggedIn = () => {\n    if (this.props.googleUser) return this.props.googleUser.isSignedIn();\n\n    return false;\n  };\n\n  authCheck = (Component, DefaultComponent) => {\n    return this.loggedIn() ? <Component /> : <DefaultComponent />;\n  };\n  /* extracts the youtube id from a url. got help from: https://ctrlq.org/code/19797-regex-youtube-id */\n  extractVideoID = (url) => {\n    var regExp =\n      /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#&?]*).*/;\n    var match = url.match(regExp);\n    if (match && match[7].length === 11) {\n      return match[7];\n    } else {\n      return url; // if extraction fails, fallback on assuming they gave an ID\n    }\n  };\n\n  render() {\n    return this.props.match.params.videoID ? (\n      <React.Fragment>\n        <NavBar color=\"grey\" />\n        <div className=\"youtube-section\">\n          <div className=\"top-section\">\n            <div className=\"title-and-url\">\n              <h1 className=\"heading-primary-main\">RiffTube</h1>\n            </div>\n          </div>\n          <h4 className=\"get-started-instructions\">\n            {this.loggedIn() ? null : (\n              <React.Fragment>\n                <Login /> <p>to get started</p>\n              </React.Fragment>\n            )}\n          </h4>\n          <label>Paste any YouTube URL here &#8594; </label>\n          <input\n            type=\"text\"\n            defaultValue={this.props.videoID}\n            ref={this.videoIDRef}\n          />\n          <button className=\"btn\" id=\"change-video-btn\" onClick={(e) => {\n              const vID = this.extractVideoID(this.videoIDRef.current.value);\n\n              this.props.history.push(`/riff/${vID}`);\n\n              this.props.setVideoID(vID, this.props.googleUser);\n            }}>\n            Change Video\n          </button>\n          <YouTubeVideo id={this.props.videoID} riffs={this.props.riffs} />\n          <MetaBar />\n          <div className=\"view-share-riff-link\">\n            <a\n              href={\n                '/view/' +\n                this.props.videoID +\n                (this.props.user_id ? '?solo=' + this.props.user_id : '')\n              }\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              View &amp; Share Riffed Video\n            </a>\n          </div>\n        </div>\n        {this.loggedIn() ? <EditControls /> : null}\n      </React.Fragment>\n    ) : (\n      <Redirect to={`/riff/${this.props.videoID}`} />\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  riffs: state.riffs.all,\n  videoID: state.videoID,\n  googleUser: state.googleUser,\n  user_id: state.user_id,\n  websocket: state.websocket,\n  recorder: state.recorder,\n});\n\nconst mapDispatchToProps = {\n  setVideoID,\n  setWebSocket,\n  getRiffsMeta,\n  getRiffs,\n  setRecorder,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditInterface);\n","import React from 'react';\nimport YouTubeVideo from '../YouTubeVideo/YouTubeVideo';\n\nclass ViewFilter extends React.Component {\n  constructor(props) {\n    super(props);\n    // window.metaPlayhead gets updated by the youtube component\n    window.metaPlayHead = React.createRef();\n    this.selectDiv = React.createRef();\n    window.metaUpdate = (el) => {\n      if (this.selectDiv.current)\n        // seems like it shouldn't be needed, but here we are\n        this.selectDiv.current.scrollLeft =\n          el.offsetLeft - this.selectDiv.current.offsetWidth / 2;\n    };\n\n    this.state = {\n      filteredRiffs: [],\n      overlappingRiffs: [],\n      nonOverlappingRiffs: null,\n      selectedRiffs: null,\n      tracks: [],\n    };\n    // filtered riffs is the final result\n    // overlapping riffs is a list of sets [of ids] of overlapping riffs\n    // selected riffs is a set\n    // tracks are used for the UI\n  }\n\n  selectRiff = (newRiff) => {\n    // use id to find riff in \"master\" list\n    //const riff = this.props.riffs.find( r => r.id == selected_id );\n    let riff;\n    if (this.state.nonOverlappingRiffs.has(riff)) return;\n\n    const selectedRiffs = new Set(this.state.selectedRiffs);\n\n    const newFiltered = new Set(this.props.riffs);\n\n    const otherOverlaps = new Set(); //new Set( this.state.overlappingRiffs );\n    this.state.overlappingRiffs.forEach((el) => otherOverlaps.add(new Set(el)));\n\n    riff = newRiff;\n\n    do {\n      // go through each set of overlapping riffs\n      for (const set of this.state.overlappingRiffs) {\n        // if that set contains the selected riff, remove all its values from the\n        if (set.has(riff)) {\n          set.forEach((el) => {\n            selectedRiffs.delete(el);\n            newFiltered.delete(el);\n          });\n        }\n      }\n\n      selectedRiffs.add(riff);\n\n      // now the hard part\n\n      for (const r of selectedRiffs) {\n        // find and delete sets of overlap that contain a selected riff\n        const toDelete = [];\n        for (const set of otherOverlaps) {\n          if (set.has(r)) {\n            toDelete.push(set);\n          }\n        }\n        for (const set of toDelete) {\n          otherOverlaps.delete(set);\n          // from the sets in question, remove all their riffs from other overlap sets\n          // (because they are no longer valid options)\n          var curOverlap = new Set();\n          for (const redu of otherOverlaps) {\n            for (const tod of set) {\n              newFiltered.delete(tod);\n              redu.delete(tod);\n            }\n          }\n        }\n      }\n      for (const redu of otherOverlaps) {\n        if (redu.size > 0) curOverlap = new Set([...curOverlap, ...redu]);\n      }\n\n      if (curOverlap.size > 0) riff = curOverlap.values().next().value;\n    } while (curOverlap.size > 0);\n\n    // generate final filtered list\n    const filteredRiffs = [...newFiltered, ...selectedRiffs];\n\n    this.setState({ filteredRiffs, selectedRiffs });\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.riffs !== this.props.riffs) {\n      debugger;\n\n      // if riffs have changed, we need to recalculate\n\n      // multiple tracks are used to display overlapping riffs at the same time\n      const tracks = [[]];\n      const trackPos = [0]; // time code where last riff on track ends\n\n      const nonOverlappingRiffs = new Set();\n\n      // used to keep track of conflicting riffs\n      const runningRiffs = [];\n\n      // these will overwrite the current values after being built\n      const overlappingRiffs = [];\n      const selectedRiffs = new Set();\n\n      // slope basically means \"was the last action to add or remove from the running list\"\n      var slope = 0;\n\n      // sort riffs by starting time\n      this.props.riffs.sort((e1, e2) => e1.time - e2.time);\n\n      // loop through sorted riffs\n      for (const riff of this.props.riffs) {\n        // check to see if any riffs end before this riff starts\n        if (runningRiffs.length > 0) {\n          // this could be optimized by first sorting running set\n          const toDelete = [];\n          for (const toCheck of runningRiffs) {\n            // (see above)\n            if (toCheck.time + toCheck.duration <= riff.time) {\n              // only add set if the prev action was an add,\n              // and there is more than 1 riff in the set\n              if (slope > 0 && runningRiffs.length > 1) {\n                overlappingRiffs.push(new Set(runningRiffs));\n\n                // when adding overlapping set, find if any are in track 0\n                // if so, they go into selectedRiffs\n                for (const candi of runningRiffs) {\n                  if (tracks[0].includes(candi)) {\n                    selectedRiffs.add(candi);\n                    break;\n                  }\n                }\n              } else if (slope > 0) {\n                // 'if' part may be unnecessary\n                nonOverlappingRiffs.add(toCheck);\n              }\n\n              // don't delete in place while looping\n              toDelete.push(toCheck);\n              slope = -1; // last action was to remove\n            }\n          }\n          for (const el of toDelete)\n            runningRiffs.splice(runningRiffs.indexOf(el), 1);\n        }\n\n        // add this riff to running list\n        runningRiffs.push(riff);\n\n        // keep running list sorted by first ending\n        runningRiffs.sort(\n          (e1, e2) => e1.time + e1.duration - (e2.time + e2.duration)\n        );\n\n        // last action was to add\n        slope = 1;\n\n        // assign riff to a track\n        var flag = true;\n        for (var i = 0; i < tracks.length; i++) {\n          // check whether this track is available\n          if (trackPos[i] <= riff.time) {\n            tracks[i].push(riff);\n            trackPos[i] = riff.time + riff.duration;\n            flag = false;\n            break;\n          }\n        }\n\n        // if no track was found, add one\n        if (flag) {\n          tracks.push([riff]);\n          trackPos.push(riff.time + riff.duration);\n        }\n      }\n\n      // cleanup after loop\n      // check to see if running set has more than 1 riff\n      // if so, add it etc.\n      if (runningRiffs.length > 1) {\n        overlappingRiffs.push(new Set(runningRiffs));\n\n        for (const candi of runningRiffs) {\n          if (tracks[0].includes(candi)) {\n            selectedRiffs.add(candi);\n            break;\n          }\n        }\n      } else nonOverlappingRiffs.add(runningRiffs[0]);\n\n      const filteredRiffs = [...tracks[0]];\n\n      this.setState({\n        filteredRiffs,\n        overlappingRiffs,\n        nonOverlappingRiffs,\n        selectedRiffs,\n        tracks,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <YouTubeVideo id={this.props.id} riffs={this.state.filteredRiffs} />\n        <div\n          ref={this.selectDiv}\n          style={{ fontSize: '2em', overflow: 'hidden', width: '640px' }}\n        >\n          <div\n            style={{\n              height: `${this.state.tracks.length * 0.75}em`,\n              width: `${this.props.duration}em`,\n              position: 'relative',\n            }}\n          >\n            <div\n              id=\"meta-play-head\"\n              style={{ backgroundColor: 'red', height: 'inherit' }}\n              ref={window.metaPlayHead}\n            />\n            {this.state.tracks.map((trackArray) => (\n              <div\n                style={{ width: `${this.props.duration}em`, height: '0.75em' }}\n              >\n                {trackArray.map((riff) => (\n                  <div\n                    style={{\n                      position: 'absolute',\n                      overflow: 'hidden',\n                      textOverflow: 'ellipsis',\n                      whiteSpace: 'nowrap',\n                      fontSize: '0.25em',\n                      lineHeight: '3em',\n                      verticalAlign: 'middle',\n                      left: `${riff.time * 4}em`,\n                      height: '3em',\n                      width: `${riff.duration * 4}em`,\n                      backgroundColor: this.state.filteredRiffs.includes(riff)\n                        ? 'red'\n                        : 'lightgrey',\n                    }}\n                    onClick={() => this.selectRiff(riff)}\n                  >\n                    {riff.name}\n                  </div>\n                ))}\n              </div>\n            ))}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ViewFilter;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport ViewFilter from './ViewFilter';\n\nclass AuthorSelector extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { names: [], muted: {}, filteredRiffs: [], all: true };\n  }\n\n  setMute = (id, mute) => {\n    this.setState((state, props) => {\n      // new state\n      const m = { ...state.muted, [id]: mute };\n\n      // const temp = props.riffs.filter((el) => !m[el.user_id]);\n\n      return {\n        muted: m,\n        filteredRiffs: props.riffs.filter((el) => !m[el.user_id]),\n        all: false,\n      };\n    });\n  };\n\n  toggleMute = (id) => {\n    //this.setMute(id, !this.state.muted[id]);\n\n    debugger;\n\n    const m = { ...this.state.muted, [id]: !this.state.muted[id] };\n\n    // not muted\n    const nm2 = this.state.names.map((el) => el.id);\n    const nm = nm2.filter((el) => !m[el]);\n    const nmStr = '?solo=' + nm.join(',');\n\n    this.props.history.push(`/view/${this.props.videoID}${nmStr}`);\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    debugger;\n\n    /*\n    if (\n      prevState.muted !== this.state.muted ||\n      prevState.all !== this.state.all\n    ) {\n      if (this.state.all) {\n        this.props.history.push(`/view/${this.props.videoID}`);\n      } else {\n        // new muted state\n        const m = { ...this.state.muted };\n\n        // not muted\n        const nm2 = this.state.names.map((el) => el.id);\n        const nm = nm2.filter((el) => !m[el]);\n        const nmStr = '?solo=' + nm.join(',');\n\n        this.props.history.push(`/view/${this.props.videoID}${nmStr}`);\n      }\n    }\n    */\n\n    const rifferList = this.props.riffers\n      ? this.props.riffers.indexOf(',') >= 0\n        ? this.props.riffers.split(',')\n        : [this.props.riffers]\n      : [];\n\n    if (prevProps.riffers !== this.props.riffers) {\n      const m = {};\n      this.state.names.forEach((el) => {\n        m[el.id] = !(\n          rifferList.includes(String(el.id)) || this.props.riffers === undefined\n        );\n      });\n      this.setState({\n        muted: m,\n        all: this.props.riffers === undefined,\n        filteredRiffs: this.props.riffs.filter((el) => !m[el.user_id]),\n      });\n    }\n\n    if (\n      prevProps.timestamp !== this.props.timestamp ||\n      (prevProps.riffs.length === 0 && this.props.riffs.length > 0)\n    ) {\n      //( prevProps.riffs !== this.props.riffs )\n      const includes = (arr, id) => arr.some((el) => el.id === id);\n\n      var names = [...this.state.names];\n\n      const m = { ...this.state.muted };\n\n      this.props.riffs.forEach((riff) => {\n        if (!includes(names, riff.user_id)) {\n          names.push({ name: riff.name, id: riff.user_id });\n\n          if (this.props.riffers !== undefined) {\n            m[riff.user_id] = !rifferList.some(\n              (riffer) => riff.user_id === Number(riffer)\n            );\n          }\n        }\n      });\n      this.setState({\n        names,\n        muted: m,\n        all: this.props.riffers === undefined,\n        filteredRiffs:\n          this.props.riffers === undefined\n            ? this.props.riffs\n            : this.props.riffs.filter((el) => !m[el.user_id]),\n      });\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <ViewFilter\n          id={this.props.videoID}\n          duration={this.props.duration}\n          riffs={this.state.filteredRiffs}\n        />\n        <div\n          onClick={() => {\n            if (!this.state.all)\n              this.props.history.push(`/view/${this.props.videoID}`);\n            else {\n              const nm2 = this.state.names.map((el) => el.id);\n              const nm = nm2.filter((el) => !this.state.muted[el]);\n              const nmStr = nm.join(',');\n\n              this.props.history.push(\n                `/view/${this.props.videoID}?solo=${nmStr}`\n              );\n            }\n          }}\n          style={{\n            backgroundColor: this.state.all ? 'blue' : 'gray',\n          }}\n        >\n          All\n        </div>\n        {this.state.names.map((el) => (\n          <div\n            key={el.id}\n            onClick={() => this.toggleMute(el.id)}\n            style={{\n              backgroundColor: this.state.muted[el.id] ? 'gray' : 'blue',\n            }}\n          >\n            {el.name}\n          </div>\n        ))}\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  timestamp: state.riffs.timestamp,\n});\n\nexport default connect(mapStateToProps, null)(AuthorSelector);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport AuthorSelector from './AuthorSelector';\nimport { setVideoID, getViewRiffs } from '../../actions';\nimport NavBar from '../NavBar.js';\n\nconst queryString = require('query-string');\n\nclass ViewInterface extends React.Component {\n  componentDidMount = () => {\n    this.props.setVideoID(this.props.match.params.videoID);\n\n    this.props.getViewRiffs(this.props.match.params.videoID);\n  };\n\n  render = () => {\n    const parsed = queryString.parse(this.props.location.search);\n\n    return (\n      <React.Fragment>\n        <NavBar color=\"grey\" />\n        <div style={{ marginTop: '4em' }}>\n          <h1>View {this.props.match.params.videoID}</h1>\n          <AuthorSelector\n            duration={this.props.duration}\n            history={this.props.history}\n            videoID={this.props.match.params.videoID}\n            riffers={parsed.solo}\n            riffs={this.props.riffs}\n          />\n        </div>\n      </React.Fragment>\n    );\n  };\n}\n\nconst mapStateToProps = (state) => ({\n  riffs: state.riffs.all,\n  duration: state.duration,\n});\n\nconst mapDispatchToProps = {\n  setVideoID,\n  getViewRiffs,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewInterface);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport NavBar from './NavBar.js';\nimport MaterialIcon from 'material-icons-react';\nimport MovieImage from '../images/undraw_movie_night_93wl.svg';\n\nconst LandingPage = () => (\n  <div className=\"landing-page\">\n    <NavBar color=\"grey\" />\n    <section className=\"top-part\">\n      <div className=\"heading\">\n        <span className=\"heading-primary-main\">RiffTube</span>\n        <span className=\"heading-primary-sub\">\n          Add Your Voice to YouTube Videos\n        </span>\n        <Link to=\"/riff\" className=\"get-started-btn btn\">\n          Get Started &#8594;\n        </Link>\n      </div>\n      <img alt=\"movie theater\" className=\"movie-image\" src={MovieImage}></img>\n    </section>\n    <section className=\"middle-part\">\n      <div className=\"middle-text\">\n        <h3>Riffing for the Riff Raff</h3>\n      </div>\n      <div className=\"about\">\n        <div className=\"about-text\">\n          <p>\n            In the glorious tradition of Mystery Science Theater 3000, The Film\n            Crew, RiffTrax, Cinematic Titanic, MST3k again, and others...\n          </p>\n          <p>\n            Now presenting: <em>you!</em>\n          </p>\n          <p>\n            RiffTube allows you to add your own riffs to any video on YouTube.\n          </p>\n        </div>\n      </div>\n      <div className=\"features\">\n        <div className=\"feature feature-one\">\n          <MaterialIcon icon=\"mic\" color=\"#a41320\" size=\"medium\" />\n          <p>Record your voice</p>\n        </div>\n        <div className=\"feature feature-two\">\n          <MaterialIcon icon=\"edit\" color=\"#a41320\" size=\"medium\" />\n          <p>Edit your recordings</p>\n        </div>\n        <div className=\"feature feature-three\">\n          <MaterialIcon icon=\"people\" color=\"#a41320\" size=\"medium\" />\n          <p>Add your friends' voices</p>\n        </div>\n        <div className=\"feature feature-three\">\n          <MaterialIcon icon=\"share\" color=\"#a41320\" size=\"medium\" />\n          <p>Share with anybody</p>\n        </div>\n      </div>\n    </section>\n    <section className=\"bottom-part\">\n      <footer className=\"landing-footer\">\n        Copyright  2020 - All rights reserved\n      </footer>\n    </section>\n  </div>\n);\n\nexport default LandingPage;\n","import React from 'react';\nimport HorrorMovie from '../images/undraw_horror_movie_3988.svg';\nimport NavBar from './NavBar.js';\n\nconst About = () => (\n  <div className=\"landing-page\">\n    <NavBar color=\"white\" />\n    <section className=\"middle-part\" style={{ height: 'initial' }}>\n      <div className=\"middle-text\">\n        <h1\n          style={{ color: 'white', marginTop: '6rem' }}\n          className=\"heading-primary-main\"\n        >\n          About RiffTube\n        </h1>\n        <p>or: How I Learned to Stop Worrying and Love RiffTube</p>\n      </div>\n      <h2>Developers:</h2>\n      <div className=\"features\">\n        <div className=\"feature feature-one\" style={{ width: 'initial' }}>\n          <img src=\"/joss.jpg\" alt=\"Joss!\" style={{ borderRadius: '50%' }} />\n\n          <p className=\"heading-name\">Joscelyn!</p>\n        </div>\n        <div className=\"feature feature-two\" style={{ width: 'initial' }}>\n          <img src=\"/david.jpg\" alt=\"David!\" style={{ borderRadius: '50%' }} />\n\n          <p className=\"heading-name\">David!</p>\n        </div>\n      </div>\n      <div\n        className=\"about\"\n        style={{ backgroundColor: 'white', width: '100%', color: 'black' }}\n      >\n        <div className=\"about-text\">\n          <h2 className=\"heading-qa\">Q&amp;A</h2>\n          <p className=\"question\">Q: Just what is RiffTube?</p>\n          <p className=\"answer\">\n            RiffTube is a tool that allows you to add your voice to YouTube\n            videos. Riffs are saved remotely, so your riffs can be shared with\n            the world!\n          </p>\n          <div\n            style={{\n              height: '1px',\n              background: 'gray',\n              width: '75%',\n              margin: 'auto',\n            }}\n          />\n          <p className=\"question\">\n            Q: How are you so smart that you came up with this and made it?\n          </p>\n          <p className=\"answer\">\n            Years spent watching MST3k and learning to code.\n          </p>\n          <div\n            style={{\n              height: '1px',\n              background: 'gray',\n              width: '75%',\n              margin: 'auto',\n            }}\n          />\n          <p className=\"question\">Q: Where are the riffs stored?</p>\n          <p className=\"answer\">\n            The are stored on a server, not your computer.\n          </p>\n          <div\n            style={{\n              height: '1px',\n              background: 'gray',\n              width: '75%',\n              margin: 'auto',\n            }}\n          />\n          <p className=\"question\">\n            Q: How can I contact you with questions or issues?\n          </p>\n          <p className=\"answer\">\n            The best way to report technical issues is via the RiffTube{' '}\n            <a href=\"https://github.com/JossWritesCode/RiffTube/issues\">\n              github repository\n            </a>{' '}\n            <a href=\"https://github.com/JossWritesCode/RiffTube/issues\">\n              issue tracker.{' '}\n            </a>\n            You can also email us:{' '}\n            <a href=\"mailto:grokprogramming@gmail.com\">\n              grokprogramming@gmail.com\n            </a>\n            .\n          </p>\n          <div\n            style={{\n              height: '1px',\n              background: 'gray',\n              width: '75%',\n              margin: 'auto',\n            }}\n          />\n          <p className=\"question\">Q: It's not working!</p>\n          <p className=\"answer\">\n            If you have a Mac, check your Security &amp; Privacy settings in\n            System Preferences. You need to make sure that your browser has\n            permission to access to microphone. If that doesn't help, please\n            email us or report the issue via github. Please include what kind of\n            computer you are using (Windows, Mac, Android, iOS, Linux, etc.),\n            and what browser (Chrome, FireFox, Edge, etc).\n          </p>\n          <div\n            style={{\n              height: '1px',\n              background: 'gray',\n              width: '75%',\n              margin: 'auto',\n            }}\n          />\n          <p className=\"question\">Q: Why is Google sign in required?</p>\n          <p className=\"answer\">\n            To identify specific users, and prevent abuse of the system. Your\n            email address and other information will never be shared without\n            your consent.\n          </p>\n          <div\n            style={{\n              height: '1px',\n              background: 'gray',\n              width: '75%',\n              margin: 'auto',\n            }}\n          />\n          <p className=\"question\">Q: Do all YouTube videos work?</p>\n          <p className=\"answer\">\n            Unfortunately, no. Only videos that allow embedding currently work\n            with RiffTube.\n          </p>\n          <div\n            style={{\n              height: '1px',\n              background: 'gray',\n              width: '75%',\n              margin: 'auto',\n            }}\n          />\n\n          <p className=\"question\">Q: Any plans?</p>\n          <p className=\"answer\">\n            So many. All the plans. If you have a feature you'd like to see,\n            please submit a request. It might already be in the works!\n          </p>\n          <div\n            style={{\n              height: '1px',\n              background: 'gray',\n              width: '75%',\n              margin: 'auto',\n            }}\n          />\n\n          <p className=\"question\">Q: What's your privacy policy?</p>\n          <p className=\"answer\">\n            RiffTube does not display, sell, or transmit any personal information publically or to any 3rd party.\n          </p>\n        </div>\n        <div>\n          <img\n            alt=\"people watching a movie\"\n            className=\"horror-movie-image\"\n            src={HorrorMovie}\n          />\n        </div>\n      </div>\n    </section>\n    <section className=\"bottom-part\">\n      <footer className=\"landing-footer\">\n        Copyright  2022 - All rights reserved\n      </footer>\n    </section>\n  </div>\n);\n\nexport default About;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst VideoList = ({ userData }) => (\n  <ul className=\"my-videos-list\">\n    {userData &&\n      userData.map(({ url, title, count }) => (\n        <li className=\"my-video\">\n          <h3 className=\"my-video-title\">\n            {title.length > 40 ? title.slice(0, 40) + '...' : title}\n            &nbsp; ({count} riff{count === 1 ? '' : 's'})\n            <br />\n            <Link to={`/riff/${url}`}>Riff</Link>\n            &nbsp;/&nbsp;\n            <Link to={`/view/${url}`}>View</Link>\n          </h3>\n          <Link to={`/riff/${url}`}>\n            <img\n              alt=\"video frame\"\n              src={`https://img.youtube.com/vi/${url}/0.jpg`}\n            />\n          </Link>\n        </li>\n      ))}\n  </ul>\n);\n\nexport default VideoList;\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport Login from './Login/Login';\nimport { setRifferName, setRiffPic, getUserData } from '../actions';\nimport NavBar from './NavBar.js';\nimport VideoList from './VideoList';\n\nconst Account = ({\n  name,\n  googleUser,\n  setRifferName,\n  setRiffPic,\n  userData,\n  getUserData,\n  userid,\n  acctImgKey,\n}) => {\n  const [userName, setUserName] = useState(name);\n\n  useEffect(() => {\n    if (googleUser) getUserData(googleUser);\n  }, [getUserData, googleUser]);\n\n  const loggedIn = () => {\n    if (googleUser) return googleUser.isSignedIn();\n    return false;\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (userName !== '') {\n      setRifferName(userName, googleUser);\n    }\n  };\n\n  const picSubmit = (event) => {\n    event.preventDefault();\n    //console.log(event.target.children[0].value);\n    setRiffPic(event.target.children[0].files[0], googleUser);\n  };\n\n  const handleChange = (event) => {\n    event.preventDefault();\n    setUserName(event.target.value);\n  };\n\n  return (\n    <div className=\"landing-page\">\n      <NavBar />\n      <div className=\"title-and-url heading\">\n        <h1 className=\"heading-primary-main account-heading\">\n          Account Settings\n        </h1>\n      </div>\n      <section className=\"top-part\">\n        {loggedIn() ? (\n          <React.Fragment>\n            <h3>\n              visit <Link to={`/profile/${userid}`}>public profile</Link>\n            </h3>\n            <form onSubmit={(event) => handleSubmit(event)}>\n              <label>\n                <h3 className=\"account-section-title\">My Riffer Name</h3>\n                <input\n                  onChange={(event) => handleChange(event)}\n                  type=\"text\"\n                  name=\"name\"\n                  defaultValue={name}\n                  className=\"form-field\"\n                />\n              </label>\n              <input type=\"submit\" value=\"Submit\" className=\"btn\" />\n            </form>\n            <img key={acctImgKey} src={`/get-riffer-pic/${userid}.png?${acctImgKey}`} />\n            <form onSubmit={(event) => picSubmit(event)}>\n              <input type=\"file\" name=\"image\" /><br /><br />\n              <button type=\"submit\">Upload</button>\n            </form>\n            <h2 className=\"account-section-title\">My Videos</h2>\n            <VideoList userData={userData} />\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            <Login /> <p>to get started</p>\n          </React.Fragment>\n        )}\n      </section>\n    </div>\n  );\n};\n\nlet mapStateToProps = (state) => ({\n  name: state.name,\n  googleUser: state.googleUser,\n  userData: state.userData,\n  userid: state.user_id,\n  acctImgKey: state.acctImgKey,\n});\n\nconst mapDispatchToProps = {\n  setRifferName,\n  setRiffPic,\n  getUserData,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Account);\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { getPublicUserData } from '../actions';\nimport NavBar from './NavBar.js';\nimport VideoList from './VideoList';\n\nconst Profile = ({\n  publicProfileData,\n  publicProfileName,\n  getPublicUserData,\n  match: {\n    params: { userID },\n  },\n}) => {\n  useEffect(() => {\n    getPublicUserData(userID);\n  }, [getPublicUserData, userID]);\n\n  return (\n    <div className=\"landing-page\">\n      <NavBar />\n      <div className=\"title-and-url heading\">\n        <h1 className=\"heading-primary-main account-heading\">\n          Profile for &quot;{publicProfileName}&quot;\n        </h1>\n      </div>\n      <section className=\"top-part\">\n        <h2 className=\"account-section-title\">Videos</h2>\n        <VideoList userData={publicProfileData} />\n      </section>\n    </div>\n  );\n};\n\nlet mapStateToProps = (state) => ({\n  publicProfileData: state.publicProfileData,\n  publicProfileName: state.publicProfileName,\n});\n\nconst mapDispatchToProps = {\n  getPublicUserData,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\n\nimport { getGlobalVideoList } from '../actions';\nimport NavBar from './NavBar.js';\nimport VideoList from './VideoList';\n\nconst TheList = ({ globalVideoList, getGlobalVideoList }) => {\n  useEffect(() => {\n    getGlobalVideoList();\n  }, [getGlobalVideoList]);\n\n  return (\n    <div className=\"landing-page\">\n      <NavBar />\n      <div className=\"title-and-url heading\">\n        <h1 className=\"heading-primary-main account-heading\">The List</h1>\n      </div>\n      <section className=\"top-part\">\n        <h2 className=\"account-section-title\">\n          every movie with at least one riff added to it\n        </h2>\n        <VideoList userData={globalVideoList} />\n      </section>\n    </div>\n  );\n};\n\nlet mapStateToProps = (state) => ({\n  globalVideoList: state.globalVideoList,\n});\n\nconst mapDispatchToProps = {\n  getGlobalVideoList,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TheList);\n","import React from 'react';\nimport EditInterface from './components/RiffControls/EditInterface';\nimport ViewInterface from './components/ViewInterface/ViewInterface';\nimport LandingPage from './components/LandingPage.js';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport About from './components/About';\nimport Account from './components/Account';\nimport Profile from './components/Profile';\nimport TheList from './components/TheList';\n\nclass App extends React.Component {\n  render() {\n    return (\n      <Router>\n        <div className=\"App\">\n          <div className=\"main-section\">\n            <Route exact path=\"/\" component={LandingPage} />\n            <Route exact path=\"/riff\" component={EditInterface} />\n            <Route exact path=\"/riff/:videoID\" component={EditInterface} />\n            <Route exact path=\"/about\" component={About} />\n            <Route exact path=\"/view/:videoID\" component={ViewInterface} />\n            <Route exact path=\"/account\" component={Account} />\n            <Route exact path=\"/profile/:userID\" component={Profile} />\n            <Route exact path=\"/TheList\" component={TheList} />\n          </div>\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import {\n  SET_VIDEO_ID,\n  DELETE_RIFF,\n  SAVE_RIFF,\n  CREATE_TEMP_AUDIO_RIFF,\n  CREATE_TEMP_TEXT_RIFF,\n  SAVE_TEMP_AUDIO,\n  CANCEL_EDIT,\n  EDIT_RIFF,\n  RECEIVE_RIFF_LIST,\n  SAVE_RIFF_SUCCESS,\n  UPDATE_RIFF_TIME_SUCCESS,\n} from '../actions/index.js';\n\nlet initialState = {\n  all: [],\n  temp: null,\n  editIndex: null,\n};\n\nconst riffsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_VIDEO_ID:\n      return initialState;\n    case CREATE_TEMP_AUDIO_RIFF:\n    case CREATE_TEMP_TEXT_RIFF:\n      return {\n        ...state,\n        temp: {\n          ...state.temp,\n          type: action.type === CREATE_TEMP_AUDIO_RIFF ? 'audio' : 'text',\n          // @ts-ignore\n          // rifftubePlayer isn't normally on the window object so this throws an error but it works.\n          time: window.rifftubePlayer.getCurrentTime(),\n          video_id: action.videoID,\n          tempId: new Date().getUTCMilliseconds(), // used to get perm id from server\n        },\n        editIndex: null,\n      };\n    case EDIT_RIFF:\n      return {\n        ...state,\n        temp: { ...state.all[action.payload] }, // copy specified riff to tempRiff\n        editIndex: action.payload,\n      };\n    case DELETE_RIFF: {\n      let ret = { ...state };\n\n      ret.all = ret.all.filter((el) => el.id !== action.id);\n\n      // silly change\n\n      /*let index = ret.all.findIndex(el => el.id === action.id);\n\n\n\n      ret.all.splice(index, 1);*/\n\n      return ret;\n    }\n    case SAVE_TEMP_AUDIO:\n      return {\n        ...state,\n        temp: {\n          ...state.temp,\n          duration: action.duration,\n          //payload: action.payload\n        },\n      };\n    case CANCEL_EDIT:\n      return {\n        ...state,\n        temp: null,\n        editIndex: null,\n      };\n    case RECEIVE_RIFF_LIST:\n      return {\n        ...state,\n        timestamp: action.payload.timestamp,\n        all: action.payload.body.map((el) => ({\n          ...el,\n          time: el.start_time,\n          payload: el.isText ? el.text : null,\n          type: el.isText ? 'text' : 'audio',\n        })),\n      };\n\n    case UPDATE_RIFF_TIME_SUCCESS:\n      let riffs = [...state.all];\n      riffs.forEach((el, ind, arr) => {\n        if (el.id === action.id)\n          arr[ind] = { ...el, id: action.id, time: Number(action.time) };\n        //el.id = action.payload.id;\n      });\n      let ret = { ...state, all: riffs };\n      return ret;\n\n    case SAVE_RIFF_SUCCESS:\n      if (action.payload.type === 'add') {\n        let riffs = [...state.all];\n        riffs.forEach((el, ind, arr) => {\n          if (el.tempId === action.payload.tempId)\n            arr[ind] = { ...el, id: action.payload.id };\n          //el.id = action.payload.id;\n        });\n        let ret = { ...state, all: riffs };\n        return ret;\n      } else return state;\n\n    case SAVE_RIFF: {\n      const { payload, ...actionPayload } = action.payload; // payload (audio data) will be ignored\n      const riff = { ...state.temp, ...actionPayload };\n\n      // the payload should be included if this is a text riff\n      if ( state.temp.type === \"text\" )\n        riff.payload = payload;\n\n      let riffs;\n\n      // adding a new riff:\n      if (state.editIndex === null) riffs = [...state.all, riff];\n      // EDIT_MODE (existing riff):\n      else {\n        riffs = [...state.all];\n        riffs[state.editIndex] = riff;\n      }\n\n      return {\n        all: riffs,\n        temp: null,\n        editIndex: null,\n      };\n    }\n\n    /*\n    case LOAD_RIFF:\n      let ret = { ...state }; // will this work?\n      ret.all[action.payload].loading = true;\n      return ret;\n    case RIFF_LOADED: {\n      debugger;\n      const b = new Blob(new Array(action.payload), { type: 'audio/mp3' });\n      let riffs = [...state.all];\n      riffs.forEach(el => {\n        if (el.id === action.id) {\n          el.payload = b;\n          el.loading = false;\n        }\n      });\n      let ret = { ...state, all: riffs };\n\n      // if this is being edited currently, tempRiff needs to be updated as well\n      // editIndex != null simply means that something is being edited\n      if (state.editIndex !== null && state.temp.id === action.id)\n        ret.temp = { ...ret.temp, payload: b };\n\n      return ret;\n    }\n    */\n\n    default:\n      return state;\n  }\n};\n\nexport default riffsReducer;\n","import {\n  SET_VIDEO_ID,\n  EDIT_RIFF,\n  SAVE_RIFF_SUCCESS,\n  SAVE_RIFF,\n  CREATE_TEMP_AUDIO_RIFF,\n  CREATE_TEMP_TEXT_RIFF,\n  RIFF_LOADED,\n  SAVE_TEMP_AUDIO,\n  CANCEL_EDIT,\n  LOAD_RIFF,\n} from '../actions/index.js';\n\nlet initialState = { saving: {}, loading: {}, temp: null, all: {}, editIndex: null };\n\nconst riffsAudioReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CREATE_TEMP_AUDIO_RIFF:\n    case CREATE_TEMP_TEXT_RIFF:\n      return { ...state, editIndex: null };\n    case SET_VIDEO_ID:\n      return initialState;\n    case EDIT_RIFF:\n      return {\n        ...state,\n        temp: state.all[action.id], // copy specified riff audio to temp\n        editIndex: action.payload\n      };\n    case SAVE_RIFF_SUCCESS: {\n      if (action.payload.type === 'add') {\n        const { [action.payload.tempId]: foo, ...saving } = state.saving; // foo is discarded\n        return {\n          ...state,\n          saving,\n          all: {\n            ...state.all,\n            [action.payload.id]: state.temp,\n          },\n          temp: null,\n        };\n      } else return state;\n    }\n    case SAVE_RIFF: {\n      // adding a new riff:\n      if (state.editIndex === null)\n        return {\n          ...state,\n          saving: {\n            ...state.saving,\n            [action.riff.tempId]: true,\n          },\n          editIndex: null,\n        };\n      // EDIT_MODE (existing riff):\n      else\n        return {\n          ...state,\n          all: {\n            ...state.all,\n            [action.riff.id]: action.payload.payload,\n          },\n          editIndex: null,\n          temp: null,\n        };\n    }\n    case LOAD_RIFF: {\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [action.payload]: true,\n        },\n      };\n    }\n    case RIFF_LOADED: {\n      const { [action.id]: foo, ...loading } = state.loading; // foo is discarded\n      const audio = new Blob(new Array(action.payload), {\n            type: 'audio/mp3',\n          });\n      return {\n        ...state,\n        loading,\n        all: {\n          ...state.all,\n          [action.id]: audio\n        },\n        temp: state.editIndex === null ? null : audio,\n      };\n    }\n    case SAVE_TEMP_AUDIO:\n      return {\n        ...state,\n        temp: action.payload,\n      };\n    case CANCEL_EDIT:\n      return {\n        ...state,\n        temp: null,\n        editIndex: null,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default riffsAudioReducer;\n","import { RECEIVE_RIFF_META } from '../actions/index.js';\n\nlet initialState = [];\n\nconst riffsMetaReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case RECEIVE_RIFF_META:\n      return action.payload.body.map((el) => ({\n        ...el,\n        time: el.start_time,\n        payload: el.isText ? el.text : null,\n        type: el.isText ? 'text' : 'audio',\n      }));\n    default:\n      return state;\n  }\n};\n\nexport default riffsMetaReducer;\n","import {\n  SET_VIDEO_ID,\n  CREATE_TEMP_AUDIO_RIFF,\n  CREATE_TEMP_TEXT_RIFF,\n  EDIT_RIFF,\n  EDIT_MODE,\n  CANCEL_EDIT,\n  SAVE_RIFF,\n  SET_PLAYER_MODE,\n  PLAY_MODE,\n  PAUSE_MODE,\n  TOGGLE_PLAYER_MODE,\n} from '../actions/index.js';\n\nconst modeReducer = (state = PAUSE_MODE, action) => {\n  switch (action.type) {\n    case SET_VIDEO_ID:\n      return PAUSE_MODE;\n    case CREATE_TEMP_AUDIO_RIFF:\n    case CREATE_TEMP_TEXT_RIFF:\n    case EDIT_RIFF:\n      return EDIT_MODE;\n    case SET_PLAYER_MODE:\n      return action.payload;\n    case CANCEL_EDIT:\n      return PAUSE_MODE;\n    case TOGGLE_PLAYER_MODE: // not needed at the moment\n      return state === PLAY_MODE ? PAUSE_MODE : PLAY_MODE;\n    case SAVE_RIFF:\n      return PAUSE_MODE; // should be an option\n    default:\n      return state;\n  }\n};\n\nexport default modeReducer;\n","import { GOOGLE_USER_SIGNIN } from '../actions/index.js';\n\nconst googleUserReducer = (state = null, action) => {\n  switch (action.type) {\n    case GOOGLE_USER_SIGNIN:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default googleUserReducer;\n","import {\n  SET_VIDEO_ID,\n  SET_RIFF_NOT_PLAYING,\n  SET_RIFF_PLAYING,\n} from '../actions/index.js';\n\nconst riffsPlayingReducer = (state = {}, action) => {\n  switch (action.type) {\n    case SET_VIDEO_ID:\n      return {};\n    case SET_RIFF_PLAYING:\n    case SET_RIFF_NOT_PLAYING:\n      return {\n        ...state,\n        [action.payload]: action.type === SET_RIFF_PLAYING ? true : false,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default riffsPlayingReducer;\n","import { RECEIVE_RIFF_LIST, RECEIVE_NAME_UPDATE, LOAD_USER_DATA } from '../actions/index.js';\n\nconst nameReducer = (state = '', action) => {\n  switch (action.type) {\n    case RECEIVE_NAME_UPDATE:\n    case RECEIVE_RIFF_LIST:\n    case LOAD_USER_DATA:\n      return action.payload.name || state; // hacky but added because no name is returned for view riffs\n    default:\n      return state;\n  }\n};\n\nexport default nameReducer;\n","import { RECEIVE_RIFF_LIST, LOAD_USER_DATA } from '../actions/index.js';\n\nconst useridReducer = (state = null, action) => {\n  switch (action.type) {\n    case RECEIVE_RIFF_LIST:\n      return action.payload.user_id || state; // hacky but added because no user-id is returned for view riffs\n    case LOAD_USER_DATA:\n      return action.payload.userid; // so inconsistent\n    default:\n      return state;\n  }\n};\n\nexport default useridReducer;\n","import { SET_VIDEO_ID } from '../actions/index.js';\n\nconst videoIDReducer = (state = 'zZvmWtx_pfU', action) => {\n  switch (action.type) {\n    case SET_VIDEO_ID:\n      return action.payload;\n\n    default:\n      return state;\n  }\n};\n\nexport default videoIDReducer;\n","import { SET_VIDEO_DURATION } from '../actions/index.js';\n\nconst videoDurationReducer = (state = null, action) => {\n  switch (action.type) {\n    case SET_VIDEO_DURATION:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default videoDurationReducer;\n","import { WEB_SOCKET_UPDATE } from '../actions/index.js';\n\nconst webSocketReducer = (state = null, action) => {\n  switch (action.type) {\n    case WEB_SOCKET_UPDATE:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default webSocketReducer;\n","import { LOAD_USER_DATA } from '../actions/index.js';\n\nconst userDataReducer = (state = [], action) => {\n  switch (action.type) {\n    case LOAD_USER_DATA:\n      return action.payload.body;\n\n    default:\n      return state;\n  }\n};\n\nexport default userDataReducer;\n","import { LOAD_PUBLIC_USER_DATA } from '../actions/index.js';\n\nconst publicProfileDataReducer = (state = [], action) => {\n  switch (action.type) {\n    case LOAD_PUBLIC_USER_DATA:\n      return action.payload.body;\n\n    default:\n      return state;\n  }\n};\n\nexport default publicProfileDataReducer;\n","import { LOAD_PUBLIC_USER_DATA } from '../actions/index.js';\n\nconst publicProfileNameReducer = (state = '', action) => {\n  switch (action.type) {\n    case LOAD_PUBLIC_USER_DATA:\n      return action.payload.name;\n\n    default:\n      return state;\n  }\n};\n\nexport default publicProfileNameReducer;\n","import { LOAD_GLOBAL_VIDEO_LIST } from '../actions/index.js';\n\nconst globalVideoListReducer = (state = [], action) => {\n  switch (action.type) {\n    case LOAD_GLOBAL_VIDEO_LIST:\n      return action.payload.body;\n\n    default:\n      return state;\n  }\n};\n\nexport default globalVideoListReducer;\n","import {\n    CREATE_TEMP_AUDIO_RIFF,\n    SET_IMMEDIATE_OFF,\n  } from '../actions/index.js';\n  \n  const immediateRecordReducer = (state = false, action) => {\n    switch (action.type) {\n      case CREATE_TEMP_AUDIO_RIFF:\n        return action.immediateRecord;\n      case SET_IMMEDIATE_OFF:\n        return false;\n      default:\n        return state;\n    }\n  };\n  \n  export default immediateRecordReducer;\n  ","import {\n    SET_RECORDER,\n} from '../actions/index.js';\n\n    const recorderReducer = (state = null, action) => {\n      switch (action.type) {\n      case SET_RECORDER:\n          return action.payload;\n        default:\n          return state;\n      }\n    };\n    \n    export default recorderReducer;\n    ","import {\n    SAVE_PIC_SUCCESS,\n  } from '../actions/index.js';\n  \n  const acctImgKeyReducer = (state = 0, action) => {\n    switch (action.type) {\n      case SAVE_PIC_SUCCESS:\n        return Date.now();\n      default:\n        return state;\n    }\n  };\n  \n  export default acctImgKeyReducer;\n  ","import { combineReducers } from 'redux';\n\nimport riffsReducer from './riffs-reducer';\nimport riffsAudioReducer from './riffsAudio-reducer';\nimport riffsMetaReducer from './riffsMeta-reducer';\nimport modeReducer from './mode-reducer';\nimport googleUserReducer from './googleUser-reducer';\nimport riffsPlayingReducer from './riffsPlaying-reducer';\nimport nameReducer from './name-reducer';\nimport useridReducer from './userid-reducer';\nimport videoIDReducer from './videoID-reducer';\nimport videoDurationReducer from './videoDuration-reducer';\nimport webSocketReducer from './websocket-reducer';\nimport userDataReducer from './userData-reducer';\nimport publicProfileDataReducer from './publicProfileData-reducer';\nimport publicProfileNameReducer from './publicProfileName-reducer';\nimport globalVideoListReducer from './globalVideoList-reducer';\nimport immediateRecordReducer from './immediate-record-reducer';\nimport recorderReducer from './recorder-reducer';\nimport acctImgKeyReducer from './acctImgKey-reducer';\n\nexport default combineReducers({\n  riffs: riffsReducer,\n  riffsAudio: riffsAudioReducer,\n  riffsMeta: riffsMetaReducer,\n  mode: modeReducer,\n  googleUser: googleUserReducer,\n  riffsPlaying: riffsPlayingReducer,\n  name: nameReducer,\n  user_id: useridReducer,\n  videoID: videoIDReducer,\n  duration: videoDurationReducer,\n  websocket: webSocketReducer,\n  userData: userDataReducer,\n  publicProfileData: publicProfileDataReducer,\n  publicProfileName: publicProfileNameReducer,\n  globalVideoList: globalVideoListReducer,\n  immediateRecord: immediateRecordReducer,\n  recorder: recorderReducer,\n  acctImgKey: acctImgKeyReducer,\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\n\nimport defaultReducer from './reducers';\n\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\n\nimport './fonts/Limelight-Regular.ttf';\nimport './SCSS/main.scss';\nimport thunkMiddleware from 'redux-thunk';\n\nconst store = createStore(defaultReducer, applyMiddleware(thunkMiddleware));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n//serviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/delete-24px.2fc9a828.svg\";","module.exports = __webpack_public_path__ + \"static/media/edit-24px.94f6e29d.svg\";","module.exports = __webpack_public_path__ + \"static/media/settings_voice-24px.62e607b7.svg\";","module.exports = __webpack_public_path__ + \"static/media/chat-24px.190e0f49.svg\";","module.exports = __webpack_public_path__ + \"static/media/undraw_movie_night_93wl.bd90a236.svg\";","module.exports = __webpack_public_path__ + \"static/media/undraw_horror_movie_3988.a8de6ac3.svg\";"],"sourceRoot":""}